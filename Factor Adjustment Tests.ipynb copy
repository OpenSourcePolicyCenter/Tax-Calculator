{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "    <div class=\"bk-root\">\n",
       "        <a href=\"http://bokeh.pydata.org\" target=\"_blank\" class=\"bk-logo bk-logo-small bk-logo-notebook\"></a>\n",
       "        <span id=\"7d84cd0f-ec3b-47df-99dd-7fc8ba2fae09\">Loading BokehJS ...</span>\n",
       "    </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "application/javascript": [
       "\n",
       "(function(global) {\n",
       "  function now() {\n",
       "    return new Date();\n",
       "  }\n",
       "\n",
       "  var force = \"1\";\n",
       "\n",
       "  if (typeof (window._bokeh_onload_callbacks) === \"undefined\" || force !== \"\") {\n",
       "    window._bokeh_onload_callbacks = [];\n",
       "    window._bokeh_is_loading = undefined;\n",
       "  }\n",
       "\n",
       "\n",
       "  \n",
       "  if (typeof (window._bokeh_timeout) === \"undefined\" || force !== \"\") {\n",
       "    window._bokeh_timeout = Date.now() + 5000;\n",
       "    window._bokeh_failed_load = false;\n",
       "  }\n",
       "\n",
       "  var NB_LOAD_WARNING = {'data': {'text/html':\n",
       "     \"<div style='background-color: #fdd'>\\n\"+\n",
       "     \"<p>\\n\"+\n",
       "     \"BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \\n\"+\n",
       "     \"may be due to a slow or bad network connection. Possible fixes:\\n\"+\n",
       "     \"</p>\\n\"+\n",
       "     \"<ul>\\n\"+\n",
       "     \"<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\\n\"+\n",
       "     \"<li>use INLINE resources instead, as so:</li>\\n\"+\n",
       "     \"</ul>\\n\"+\n",
       "     \"<code>\\n\"+\n",
       "     \"from bokeh.resources import INLINE\\n\"+\n",
       "     \"output_notebook(resources=INLINE)\\n\"+\n",
       "     \"</code>\\n\"+\n",
       "     \"</div>\"}};\n",
       "\n",
       "  function display_loaded() {\n",
       "    if (window.Bokeh !== undefined) {\n",
       "      Bokeh.$(\"#7d84cd0f-ec3b-47df-99dd-7fc8ba2fae09\").text(\"BokehJS successfully loaded.\");\n",
       "    } else if (Date.now() < window._bokeh_timeout) {\n",
       "      setTimeout(display_loaded, 100)\n",
       "    }\n",
       "  }\n",
       "\n",
       "  function run_callbacks() {\n",
       "    window._bokeh_onload_callbacks.forEach(function(callback) { callback() });\n",
       "    delete window._bokeh_onload_callbacks\n",
       "    console.info(\"Bokeh: all callbacks have finished\");\n",
       "  }\n",
       "\n",
       "  function load_libs(js_urls, callback) {\n",
       "    window._bokeh_onload_callbacks.push(callback);\n",
       "    if (window._bokeh_is_loading > 0) {\n",
       "      console.log(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n",
       "      return null;\n",
       "    }\n",
       "    if (js_urls == null || js_urls.length === 0) {\n",
       "      run_callbacks();\n",
       "      return null;\n",
       "    }\n",
       "    console.log(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n",
       "    window._bokeh_is_loading = js_urls.length;\n",
       "    for (var i = 0; i < js_urls.length; i++) {\n",
       "      var url = js_urls[i];\n",
       "      var s = document.createElement('script');\n",
       "      s.src = url;\n",
       "      s.async = false;\n",
       "      s.onreadystatechange = s.onload = function() {\n",
       "        window._bokeh_is_loading--;\n",
       "        if (window._bokeh_is_loading === 0) {\n",
       "          console.log(\"Bokeh: all BokehJS libraries loaded\");\n",
       "          run_callbacks()\n",
       "        }\n",
       "      };\n",
       "      s.onerror = function() {\n",
       "        console.warn(\"failed to load library \" + url);\n",
       "      };\n",
       "      console.log(\"Bokeh: injecting script tag for BokehJS library: \", url);\n",
       "      document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "    }\n",
       "  };var element = document.getElementById(\"7d84cd0f-ec3b-47df-99dd-7fc8ba2fae09\");\n",
       "  if (element == null) {\n",
       "    console.log(\"Bokeh: ERROR: autoload.js configured with elementid '7d84cd0f-ec3b-47df-99dd-7fc8ba2fae09' but no matching script tag was found. \")\n",
       "    return false;\n",
       "  }\n",
       "\n",
       "  var js_urls = ['https://cdn.pydata.org/bokeh/release/bokeh-0.12.3.min.js', 'https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.3.min.js'];\n",
       "\n",
       "  var inline_js = [\n",
       "    function(Bokeh) {\n",
       "      Bokeh.set_log_level(\"info\");\n",
       "    },\n",
       "    \n",
       "    function(Bokeh) {\n",
       "      \n",
       "      Bokeh.$(\"#7d84cd0f-ec3b-47df-99dd-7fc8ba2fae09\").text(\"BokehJS is loading...\");\n",
       "    },\n",
       "    function(Bokeh) {\n",
       "      console.log(\"Bokeh: injecting CSS: https://cdn.pydata.org/bokeh/release/bokeh-0.12.3.min.css\");\n",
       "      Bokeh.embed.inject_css(\"https://cdn.pydata.org/bokeh/release/bokeh-0.12.3.min.css\");\n",
       "      console.log(\"Bokeh: injecting CSS: https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.3.min.css\");\n",
       "      Bokeh.embed.inject_css(\"https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.3.min.css\");\n",
       "    }\n",
       "  ];\n",
       "\n",
       "  function run_inline_js() {\n",
       "    \n",
       "    if ((window.Bokeh !== undefined) || (force === \"1\")) {\n",
       "      for (var i = 0; i < inline_js.length; i++) {\n",
       "        inline_js[i](window.Bokeh);\n",
       "      }if (force === \"1\") {\n",
       "        display_loaded();\n",
       "      }} else if (Date.now() < window._bokeh_timeout) {\n",
       "      setTimeout(run_inline_js, 100);\n",
       "    } else if (!window._bokeh_failed_load) {\n",
       "      console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n",
       "      window._bokeh_failed_load = true;\n",
       "    } else if (!force) {\n",
       "      var cell = $(\"#7d84cd0f-ec3b-47df-99dd-7fc8ba2fae09\").parents('.cell').data().cell;\n",
       "      cell.output_area.append_execute_result(NB_LOAD_WARNING)\n",
       "    }\n",
       "\n",
       "  }\n",
       "\n",
       "  if (window._bokeh_is_loading === 0) {\n",
       "    console.log(\"Bokeh: BokehJS loaded, going straight to plotting\");\n",
       "    run_inline_js();\n",
       "  } else {\n",
       "    load_libs(js_urls, function() {\n",
       "      console.log(\"Bokeh: BokehJS plotting callback run at\", now());\n",
       "      run_inline_js();\n",
       "    });\n",
       "  }\n",
       "}(this));"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from taxcalc import *\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "from bokeh.plotting import figure, show, output_file\n",
    "from bokeh.io import output_notebook, hplot\n",
    "from bokeh.charts import Scatter\n",
    "output_notebook()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "You loaded data for 2009.\n",
      "Instantiation of the calculator automatically extrapolated your data to 2013.\n"
     ]
    }
   ],
   "source": [
    "# Calculator with adjustments\n",
    "recs = Records()\n",
    "policy = Policy()\n",
    "calc = Calculator(policy=policy, records=recs)\n",
    "calc.advance_to_year(2014)\n",
    "calc.calc_all()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "You loaded data for 2009.\n",
      "Instantiation of the calculator automatically extrapolated your data to 2013.\n"
     ]
    }
   ],
   "source": [
    "# Calculator without adjustments\n",
    "recs_none = Records(adjust_factors=None)\n",
    "policy_none = Policy()\n",
    "calc_none = Calculator(policy=policy_none, records=recs_none)\n",
    "calc_none.advance_to_year(2014)\n",
    "calc_none.calc_all()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# Read comparison SOI data\n",
    "soi = pd.read_csv('soi_data.csv')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "def distribution(item, weight, agi):\n",
    "    agi_1 = (((item[agi < 0] * weight[agi < 0]).sum() / 1000))\n",
    "    agi_2 = ((item[(agi > 1) & (agi < 5000)] * weight[(agi > 1) & (agi < 5000)]).sum() / 1000)\n",
    "    agi_3 = ((item[(agi > 5000) & (agi < 10000)] * weight[(agi > 5000) & (agi < 10000)]).sum() / 1000)\n",
    "    agi_4 = ((item[(agi > 10000) & (agi < 15000)] * weight[(agi > 10000) & (agi < 15000)]).sum() / 1000)\n",
    "    agi_5 = ((item[(agi > 15000) & (agi < 20000)] * weight[(agi > 15000) & (agi < 20000)]).sum() / 1000)\n",
    "    agi_6 = ((item[(agi > 20000) & (agi < 25000)] * weight[(agi > 20000) & (agi < 25000)]).sum() / 1000)\n",
    "    agi_7 = ((item[(agi > 25000) & (agi < 30000)] * weight[(agi > 25000) & (agi < 30000)]).sum() / 1000)\n",
    "    agi_8 = ((item[(agi > 30000) & (agi < 40000)] * weight[(agi > 30000) & (agi < 40000)]).sum() / 1000)\n",
    "    agi_9 = ((item[(agi > 40000) & (agi < 50000)] * weight[(agi > 40000) & (agi < 50000)]).sum() / 1000)\n",
    "    agi_10 = ((item[(agi > 50000) & (agi < 75000)] * weight[(agi > 50000) & (agi < 75000)]).sum() / 1000)\n",
    "    agi_11 = ((item[(agi > 75000) & (agi < 100000)] * weight[(agi > 75000) & (agi < 100000)]).sum() / 1000)\n",
    "    agi_12 = ((item[(agi > 100000) & (agi < 200000)] * weight[(agi > 100000) & (agi < 200000)]).sum() / 1000)\n",
    "    agi_13 = ((item[(agi > 200000) & (agi < 500000)] * weight[(agi > 200000) & (agi < 500000)]).sum() / 1000)\n",
    "    agi_14 = ((item[(agi > 500000) & (agi < 1000000)] * weight[(agi > 500000) & (agi < 1000000)]).sum() / 1000)\n",
    "    agi_15 = ((item[(agi > 1000000) & (agi < 1500000)] * weight[(agi > 1000000) & (agi < 1500000)]).sum() / 1000)\n",
    "    agi_16 = ((item[(agi > 1500000) & (agi < 2000000)] * weight[(agi > 1500000) & ( agi < 2000000)]).sum() / 1000)\n",
    "    agi_17 = ((item[(agi > 2000000) & (agi < 5000000)] * weight[(agi > 2000000) & ( agi < 5000000)]).sum() / 1000)\n",
    "    agi_18 = ((item[(agi > 5000000) & (agi < 10000000)] * weight[(agi > 5000000) & ( agi < 10000000)]).sum() / 1000)\n",
    "    agi_19 = ((item[agi > 10000000] * weight[agi > 10000000]).sum() / 1000)\n",
    "    df = [agi_1, agi_2, agi_3, agi_4, agi_5, agi_6, agi_7, agi_8, agi_9, agi_10, agi_11,\n",
    "                       agi_12, agi_13, agi_14, agi_15, agi_16, agi_17, agi_18, agi_19]\n",
    "    return df"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {
    "collapsed": false
   },
   "outputs": [],
   "source": [
    "# Find totals for each item in original calculator\n",
    "tc = pd.DataFrame()\n",
    "tc['AGI'] = distribution(calc.records.c00100, calc.records.s006, calc.records.c00100)\n",
    "tc['Wages'] = distribution(calc.records.e00200, calc.records.s006, calc.records.c00100)\n",
    "tc['Interest'] = distribution(calc.records.e00300, calc.records.s006, calc.records.c00100)\n",
    "tc['Dividends'] = distribution(calc.records.e00650, calc.records.s006, calc.records.c00100)\n",
    "tc['SchC'] = distribution(calc.records.e00900, calc.records.s006, calc.records.c00100)\n",
    "tc['IRA'] = distribution(calc.records.e01400, calc.records.s006, calc.records.c00100)\n",
    "tc['Scorp'] = distribution(calc.records.e26270, calc.records.s006, calc.records.c00100)\n",
    "tc['SS Benefits'] = distribution(calc.records.e02400, calc.records.s006, calc.records.c00100)\n",
    "tc['Item Ded'] = distribution(calc.records.c04470, calc.records.s006, calc.records.c00100)\n",
    "tc['Inc'] = distribution(calc.records.c04800, calc.records.s006, calc.records.c00100)\n",
    "tc['CGNS']= distribution(calc.records.c01000, calc.records.s006, calc.records.c00100)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {
    "collapsed": false
   },
   "outputs": [],
   "source": [
    "# Find totals for each item in calculator with no adjustment\n",
    "tc_none = pd.DataFrame()\n",
    "tc_none['AGI'] = distribution(calc_none.records.c00100, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['Wages'] = distribution(calc_none.records.e00200, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['Interest'] = distribution(calc_none.records.e00300, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['Dividends'] = distribution(calc_none.records.e00650, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['SchC'] = distribution(calc_none.records.e00900, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['IRA'] = distribution(calc_none.records.e01400, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['Scorp'] = distribution(calc_none.records.e26270, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['SS Benefits'] = distribution(calc_none.records.e02400, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['Item Ded'] = distribution(calc_none.records.c04470, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['Inc'] = distribution(calc_none.records.c04800, calc_none.records.s006, calc_none.records.c00100)\n",
    "tc_none['CGNS']= distribution(calc_none.records.c01000, calc_none.records.s006, calc_none.records.c00100)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "index_list = ['Zero or Negative',\n",
    "              '$1-$5K',\n",
    "              '$5K-$10K',\n",
    "              '$10K-$15K',\n",
    "              '$15K-$20K',\n",
    "              '$20K-$25K',\n",
    "              '$25K-$30K',\n",
    "              '$30K-$40K',\n",
    "              '$40K-$50K',\n",
    "              '$50K-$75K',\n",
    "              '$75K-$100K',\n",
    "              '$100K-$200K',\n",
    "              '$200K-$500K',\n",
    "              '$500K-$1M',\n",
    "              '$1M-$1.5M',\n",
    "              '$1.5M-$2M',\n",
    "              '$2M-$5M',\n",
    "              '$5M-$10M',\n",
    "              '$10M and over']\n",
    "results.index = index_list"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# AGI Distribution"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "\n",
       "    <div class=\"bk-root\">\n",
       "        <div class=\"plotdiv\" id=\"16b128c9-bbd5-4746-853d-010ef123638f\"></div>\n",
       "    </div>\n",
       "<script type=\"text/javascript\">\n",
       "  \n",
       "  (function(global) {\n",
       "    function now() {\n",
       "      return new Date();\n",
       "    }\n",
       "  \n",
       "    var force = \"\";\n",
       "  \n",
       "    if (typeof (window._bokeh_onload_callbacks) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_onload_callbacks = [];\n",
       "      window._bokeh_is_loading = undefined;\n",
       "    }\n",
       "  \n",
       "  \n",
       "    \n",
       "    if (typeof (window._bokeh_timeout) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_timeout = Date.now() + 0;\n",
       "      window._bokeh_failed_load = false;\n",
       "    }\n",
       "  \n",
       "    var NB_LOAD_WARNING = {'data': {'text/html':\n",
       "       \"<div style='background-color: #fdd'>\\n\"+\n",
       "       \"<p>\\n\"+\n",
       "       \"BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \\n\"+\n",
       "       \"may be due to a slow or bad network connection. Possible fixes:\\n\"+\n",
       "       \"</p>\\n\"+\n",
       "       \"<ul>\\n\"+\n",
       "       \"<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\\n\"+\n",
       "       \"<li>use INLINE resources instead, as so:</li>\\n\"+\n",
       "       \"</ul>\\n\"+\n",
       "       \"<code>\\n\"+\n",
       "       \"from bokeh.resources import INLINE\\n\"+\n",
       "       \"output_notebook(resources=INLINE)\\n\"+\n",
       "       \"</code>\\n\"+\n",
       "       \"</div>\"}};\n",
       "  \n",
       "    function display_loaded() {\n",
       "      if (window.Bokeh !== undefined) {\n",
       "        Bokeh.$(\"#16b128c9-bbd5-4746-853d-010ef123638f\").text(\"BokehJS successfully loaded.\");\n",
       "      } else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(display_loaded, 100)\n",
       "      }\n",
       "    }\n",
       "  \n",
       "    function run_callbacks() {\n",
       "      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });\n",
       "      delete window._bokeh_onload_callbacks\n",
       "      console.info(\"Bokeh: all callbacks have finished\");\n",
       "    }\n",
       "  \n",
       "    function load_libs(js_urls, callback) {\n",
       "      window._bokeh_onload_callbacks.push(callback);\n",
       "      if (window._bokeh_is_loading > 0) {\n",
       "        console.log(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n",
       "        return null;\n",
       "      }\n",
       "      if (js_urls == null || js_urls.length === 0) {\n",
       "        run_callbacks();\n",
       "        return null;\n",
       "      }\n",
       "      console.log(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n",
       "      window._bokeh_is_loading = js_urls.length;\n",
       "      for (var i = 0; i < js_urls.length; i++) {\n",
       "        var url = js_urls[i];\n",
       "        var s = document.createElement('script');\n",
       "        s.src = url;\n",
       "        s.async = false;\n",
       "        s.onreadystatechange = s.onload = function() {\n",
       "          window._bokeh_is_loading--;\n",
       "          if (window._bokeh_is_loading === 0) {\n",
       "            console.log(\"Bokeh: all BokehJS libraries loaded\");\n",
       "            run_callbacks()\n",
       "          }\n",
       "        };\n",
       "        s.onerror = function() {\n",
       "          console.warn(\"failed to load library \" + url);\n",
       "        };\n",
       "        console.log(\"Bokeh: injecting script tag for BokehJS library: \", url);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      }\n",
       "    };var element = document.getElementById(\"16b128c9-bbd5-4746-853d-010ef123638f\");\n",
       "    if (element == null) {\n",
       "      console.log(\"Bokeh: ERROR: autoload.js configured with elementid '16b128c9-bbd5-4746-853d-010ef123638f' but no matching script tag was found. \")\n",
       "      return false;\n",
       "    }\n",
       "  \n",
       "    var js_urls = [];\n",
       "  \n",
       "    var inline_js = [\n",
       "      function(Bokeh) {\n",
       "        Bokeh.$(function() {\n",
       "            var docs_json = {\"1cfcd7a2-ec03-4624-9ca6-cfb57b7c425b\":{\"roots\":{\"references\":[{\"attributes\":{\"data_source\":{\"id\":\"c74b9e53-de81-4a62-ab36-79d03573d69c\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"bf1c3c1a-9b41-4fa1-92d0-e27a1bce91b9\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"edb6602d-187c-402a-947e-1e42234701c9\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"data_source\":{\"id\":\"9fb6cd1c-de66-4278-8395-1990271c7db9\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"a217bb5f-84bf-460a-bdee-4064f49c75f3\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"9679514e-68dd-47e6-956e-f01d642b6235\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"data_source\":{\"id\":\"5bf325ca-2405-4abd-8d79-2b337776b6f6\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"39263a9f-f3cd-4dd2-b888-6ea8f3ee562e\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"2ec2fe85-322f-404d-9cfe-888a4f0b9245\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"label\":{\"value\":\"SOI\"},\"renderers\":[{\"id\":\"edb6602d-187c-402a-947e-1e42234701c9\",\"type\":\"GlyphRenderer\"}]},\"id\":\"6d0e4591-c49a-410d-b4f6-19865a271cdf\",\"type\":\"LegendItem\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[-1.4689435407629163,0.39820439097609794,0.9712590407184456,1.5593081858486413,1.8900969212277778,1.9256643828494902,2.3261147635825083,4.558789532710962,4.651036049032769,11.57611645655608,10.08978634367519,23.94936046701202,15.765660150734995,6.197612471060065,2.789152811610424,1.6856595426286467,4.316590325666303,2.4166551361665034,4.401876568705995]}},\"id\":\"9fb6cd1c-de66-4278-8395-1990271c7db9\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"callback\":null,\"factors\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"]},\"id\":\"971c542e-4c92-41c3-86a8-10cfad9955bb\",\"type\":\"FactorRange\"},{\"attributes\":{\"label\":{\"value\":\"TC-Adjustment\"},\"renderers\":[{\"id\":\"2ec2fe85-322f-404d-9cfe-888a4f0b9245\",\"type\":\"GlyphRenderer\"}]},\"id\":\"d0f8696d-2153-43a6-96f4-a94931bbe712\",\"type\":\"LegendItem\"},{\"attributes\":{\"items\":[{\"id\":\"6d0e4591-c49a-410d-b4f6-19865a271cdf\",\"type\":\"LegendItem\"},{\"id\":\"d0f8696d-2153-43a6-96f4-a94931bbe712\",\"type\":\"LegendItem\"},{\"id\":\"f33e8abe-8f97-4487-a26c-eea85786cfa4\",\"type\":\"LegendItem\"}],\"location\":\"top_left\",\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"de83c239-a35e-4ba3-b566-d9fb0475e41f\",\"type\":\"Legend\"},{\"attributes\":{},\"id\":\"1321b845-dabc-42d6-9009-084773c10565\",\"type\":\"ToolEvents\"},{\"attributes\":{\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"12ce0ba3-0387-4cd0-9f0c-f2ca4b4d39b8\",\"type\":\"SaveTool\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[-1.4785131344317126,0.3916031795836366,0.9679240020849047,1.5592409000804064,1.8934169485711587,1.9068071170395466,2.3181844085999095,4.55745725288323,4.6348912022774575,11.518466155530138,10.044459502913169,23.87165143546686,15.770132029533118,6.224411001441086,2.789060020116131,1.6890443026060786,4.337666640712062,2.433774470215546,4.570322564777288]}},\"id\":\"5bf325ca-2405-4abd-8d79-2b337776b6f6\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"axis_label\":\"AGI Bin\",\"formatter\":{\"id\":\"ab1b47cf-bcec-4ec8-ae57-05cb4834e0b0\",\"type\":\"CategoricalTickFormatter\"},\"major_label_orientation\":0.7853981633974483,\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"48e3dc69-3393-4804-96a1-a32c7b422d41\",\"type\":\"CategoricalTicker\"}},\"id\":\"494f8115-750f-4e6d-a50b-72c6a714d29a\",\"type\":\"CategoricalAxis\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\"],\"chart_index\":[{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[-2.023232816833435,0.2699723815103905,0.9182150838366033,1.574355383167247,2.0240888571246947,2.3133943176829828,2.47434967539958,5.193779549470739,5.260033377514894,12.198877710914186,11.376748963930579,24.1709927496474,14.53046326345665,5.758067515639457,2.2252169788779392,1.3556705857121296,3.3416302902659054,1.862069845500218,5.17530628718184]}},\"id\":\"c74b9e53-de81-4a62-ab36-79d03573d69c\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"below\":[{\"id\":\"494f8115-750f-4e6d-a50b-72c6a714d29a\",\"type\":\"CategoricalAxis\"}],\"left\":[{\"id\":\"81a19f17-5843-4bfb-a66d-73db2b06f1e4\",\"type\":\"LinearAxis\"}],\"renderers\":[{\"id\":\"7490a15f-eda8-49d1-b489-123842868110\",\"type\":\"BoxAnnotation\"},{\"id\":\"edb6602d-187c-402a-947e-1e42234701c9\",\"type\":\"GlyphRenderer\"},{\"id\":\"2ec2fe85-322f-404d-9cfe-888a4f0b9245\",\"type\":\"GlyphRenderer\"},{\"id\":\"9679514e-68dd-47e6-956e-f01d642b6235\",\"type\":\"GlyphRenderer\"},{\"id\":\"de83c239-a35e-4ba3-b566-d9fb0475e41f\",\"type\":\"Legend\"},{\"id\":\"494f8115-750f-4e6d-a50b-72c6a714d29a\",\"type\":\"CategoricalAxis\"},{\"id\":\"81a19f17-5843-4bfb-a66d-73db2b06f1e4\",\"type\":\"LinearAxis\"},{\"id\":\"8d28af84-20b9-42cc-a9a3-dda32135a265\",\"type\":\"Grid\"},{\"id\":\"c45441f2-bc26-4b90-9a83-d78d7e404735\",\"type\":\"Grid\"}],\"title\":{\"id\":\"3c48b31e-5bd3-48fc-9b99-e4671a3ec382\",\"type\":\"Title\"},\"tool_events\":{\"id\":\"1321b845-dabc-42d6-9009-084773c10565\",\"type\":\"ToolEvents\"},\"toolbar\":{\"id\":\"0d7a1dd7-f8bd-4dc9-8be7-a4176d458e36\",\"type\":\"Toolbar\"},\"x_mapper_type\":\"auto\",\"x_range\":{\"id\":\"971c542e-4c92-41c3-86a8-10cfad9955bb\",\"type\":\"FactorRange\"},\"y_mapper_type\":\"auto\",\"y_range\":{\"id\":\"f9d267fe-cf62-4714-ac50-d52f6c490742\",\"type\":\"Range1d\"}},\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"},{\"attributes\":{\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"48e3dc69-3393-4804-96a1-a32c7b422d41\",\"type\":\"CategoricalTicker\"}},\"id\":\"8d28af84-20b9-42cc-a9a3-dda32135a265\",\"type\":\"Grid\"},{\"attributes\":{\"bottom_units\":\"screen\",\"fill_alpha\":{\"value\":0.5},\"fill_color\":{\"value\":\"lightgrey\"},\"left_units\":\"screen\",\"level\":\"overlay\",\"line_alpha\":{\"value\":1.0},\"line_color\":{\"value\":\"black\"},\"line_dash\":[4,4],\"line_width\":{\"value\":2},\"plot\":null,\"render_mode\":\"css\",\"right_units\":\"screen\",\"top_units\":\"screen\"},\"id\":\"7490a15f-eda8-49d1-b489-123842868110\",\"type\":\"BoxAnnotation\"},{\"attributes\":{\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"22682a26-29fc-462f-b8d2-a1d132495d29\",\"type\":\"ResetTool\"},{\"attributes\":{\"label\":{\"value\":\"TC-No Adjustment\"},\"renderers\":[{\"id\":\"9679514e-68dd-47e6-956e-f01d642b6235\",\"type\":\"GlyphRenderer\"}]},\"id\":\"f33e8abe-8f97-4487-a26c-eea85786cfa4\",\"type\":\"LegendItem\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#f22c40\"},\"line_color\":{\"value\":\"#f22c40\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"bf1c3c1a-9b41-4fa1-92d0-e27a1bce91b9\",\"type\":\"Circle\"},{\"attributes\":{\"callback\":null,\"end\":26.790415306295483,\"start\":-4.642655373481519},\"id\":\"f9d267fe-cf62-4714-ac50-d52f6c490742\",\"type\":\"Range1d\"},{\"attributes\":{\"plot\":null,\"text\":\"Percent of Total AGI by AGI Bin\"},\"id\":\"3c48b31e-5bd3-48fc-9b99-e4671a3ec382\",\"type\":\"Title\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#5ab738\"},\"line_color\":{\"value\":\"#5ab738\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"39263a9f-f3cd-4dd2-b888-6ea8f3ee562e\",\"type\":\"Circle\"},{\"attributes\":{\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"53003420-8a1e-44a7-927f-16bb2898ce3a\",\"type\":\"PanTool\"},{\"attributes\":{\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"5c785dda-eda9-4698-ad5c-438721ae2cb4\",\"type\":\"WheelZoomTool\"},{\"attributes\":{\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"50e427da-e0b2-4b88-94e2-6b348f7b4dab\",\"type\":\"HelpTool\"},{\"attributes\":{},\"id\":\"48e3dc69-3393-4804-96a1-a32c7b422d41\",\"type\":\"CategoricalTicker\"},{\"attributes\":{\"active_drag\":\"auto\",\"active_scroll\":\"auto\",\"active_tap\":\"auto\",\"tools\":[{\"id\":\"53003420-8a1e-44a7-927f-16bb2898ce3a\",\"type\":\"PanTool\"},{\"id\":\"5c785dda-eda9-4698-ad5c-438721ae2cb4\",\"type\":\"WheelZoomTool\"},{\"id\":\"5cb612dd-57ea-45ad-98bc-61696b48e954\",\"type\":\"BoxZoomTool\"},{\"id\":\"12ce0ba3-0387-4cd0-9f0c-f2ca4b4d39b8\",\"type\":\"SaveTool\"},{\"id\":\"22682a26-29fc-462f-b8d2-a1d132495d29\",\"type\":\"ResetTool\"},{\"id\":\"50e427da-e0b2-4b88-94e2-6b348f7b4dab\",\"type\":\"HelpTool\"}]},\"id\":\"0d7a1dd7-f8bd-4dc9-8be7-a4176d458e36\",\"type\":\"Toolbar\"},{\"attributes\":{\"overlay\":{\"id\":\"7490a15f-eda8-49d1-b489-123842868110\",\"type\":\"BoxAnnotation\"},\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"5cb612dd-57ea-45ad-98bc-61696b48e954\",\"type\":\"BoxZoomTool\"},{\"attributes\":{\"axis_label\":\"Percent of Total AGI\",\"formatter\":{\"id\":\"067bdc56-3af7-4719-9552-d1e1b278b3db\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"0b2be74f-c9bf-4436-a158-3689817a6458\",\"type\":\"BasicTicker\"}},\"id\":\"81a19f17-5843-4bfb-a66d-73db2b06f1e4\",\"type\":\"LinearAxis\"},{\"attributes\":{\"dimension\":1,\"plot\":{\"id\":\"b04052ff-445b-4225-b255-0232c4a2cc29\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"0b2be74f-c9bf-4436-a158-3689817a6458\",\"type\":\"BasicTicker\"}},\"id\":\"c45441f2-bc26-4b90-9a83-d78d7e404735\",\"type\":\"Grid\"},{\"attributes\":{},\"id\":\"0b2be74f-c9bf-4436-a158-3689817a6458\",\"type\":\"BasicTicker\"},{\"attributes\":{},\"id\":\"ab1b47cf-bcec-4ec8-ae57-05cb4834e0b0\",\"type\":\"CategoricalTickFormatter\"},{\"attributes\":{},\"id\":\"067bdc56-3af7-4719-9552-d1e1b278b3db\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#407ee7\"},\"line_color\":{\"value\":\"#407ee7\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"a217bb5f-84bf-460a-bdee-4064f49c75f3\",\"type\":\"Circle\"}],\"root_ids\":[\"b04052ff-445b-4225-b255-0232c4a2cc29\"]},\"title\":\"Bokeh Application\",\"version\":\"0.12.3\"}};\n",
       "            var render_items = [{\"docid\":\"1cfcd7a2-ec03-4624-9ca6-cfb57b7c425b\",\"elementid\":\"16b128c9-bbd5-4746-853d-010ef123638f\",\"modelid\":\"b04052ff-445b-4225-b255-0232c4a2cc29\"}];\n",
       "            \n",
       "            Bokeh.embed.embed_items(docs_json, render_items);\n",
       "        });\n",
       "      },\n",
       "      function(Bokeh) {\n",
       "      }\n",
       "    ];\n",
       "  \n",
       "    function run_inline_js() {\n",
       "      \n",
       "      if ((window.Bokeh !== undefined) || (force === \"1\")) {\n",
       "        for (var i = 0; i < inline_js.length; i++) {\n",
       "          inline_js[i](window.Bokeh);\n",
       "        }if (force === \"1\") {\n",
       "          display_loaded();\n",
       "        }} else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(run_inline_js, 100);\n",
       "      } else if (!window._bokeh_failed_load) {\n",
       "        console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n",
       "        window._bokeh_failed_load = true;\n",
       "      } else if (!force) {\n",
       "        var cell = $(\"#16b128c9-bbd5-4746-853d-010ef123638f\").parents('.cell').data().cell;\n",
       "        cell.output_area.append_execute_result(NB_LOAD_WARNING)\n",
       "      }\n",
       "  \n",
       "    }\n",
       "  \n",
       "    if (window._bokeh_is_loading === 0) {\n",
       "      console.log(\"Bokeh: BokehJS loaded, going straight to plotting\");\n",
       "      run_inline_js();\n",
       "    } else {\n",
       "      load_libs(js_urls, function() {\n",
       "        console.log(\"Bokeh: BokehJS plotting callback run at\", now());\n",
       "        run_inline_js();\n",
       "      });\n",
       "    }\n",
       "  }(this));\n",
       "</script>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "\n",
       "\n",
       "    <div class=\"bk-root\">\n",
       "        <div class=\"plotdiv\" id=\"fa786a90-0756-4517-805d-83205097e661\"></div>\n",
       "    </div>\n",
       "<script type=\"text/javascript\">\n",
       "  \n",
       "  (function(global) {\n",
       "    function now() {\n",
       "      return new Date();\n",
       "    }\n",
       "  \n",
       "    var force = \"\";\n",
       "  \n",
       "    if (typeof (window._bokeh_onload_callbacks) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_onload_callbacks = [];\n",
       "      window._bokeh_is_loading = undefined;\n",
       "    }\n",
       "  \n",
       "  \n",
       "    \n",
       "    if (typeof (window._bokeh_timeout) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_timeout = Date.now() + 0;\n",
       "      window._bokeh_failed_load = false;\n",
       "    }\n",
       "  \n",
       "    var NB_LOAD_WARNING = {'data': {'text/html':\n",
       "       \"<div style='background-color: #fdd'>\\n\"+\n",
       "       \"<p>\\n\"+\n",
       "       \"BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \\n\"+\n",
       "       \"may be due to a slow or bad network connection. Possible fixes:\\n\"+\n",
       "       \"</p>\\n\"+\n",
       "       \"<ul>\\n\"+\n",
       "       \"<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\\n\"+\n",
       "       \"<li>use INLINE resources instead, as so:</li>\\n\"+\n",
       "       \"</ul>\\n\"+\n",
       "       \"<code>\\n\"+\n",
       "       \"from bokeh.resources import INLINE\\n\"+\n",
       "       \"output_notebook(resources=INLINE)\\n\"+\n",
       "       \"</code>\\n\"+\n",
       "       \"</div>\"}};\n",
       "  \n",
       "    function display_loaded() {\n",
       "      if (window.Bokeh !== undefined) {\n",
       "        Bokeh.$(\"#fa786a90-0756-4517-805d-83205097e661\").text(\"BokehJS successfully loaded.\");\n",
       "      } else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(display_loaded, 100)\n",
       "      }\n",
       "    }\n",
       "  \n",
       "    function run_callbacks() {\n",
       "      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });\n",
       "      delete window._bokeh_onload_callbacks\n",
       "      console.info(\"Bokeh: all callbacks have finished\");\n",
       "    }\n",
       "  \n",
       "    function load_libs(js_urls, callback) {\n",
       "      window._bokeh_onload_callbacks.push(callback);\n",
       "      if (window._bokeh_is_loading > 0) {\n",
       "        console.log(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n",
       "        return null;\n",
       "      }\n",
       "      if (js_urls == null || js_urls.length === 0) {\n",
       "        run_callbacks();\n",
       "        return null;\n",
       "      }\n",
       "      console.log(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n",
       "      window._bokeh_is_loading = js_urls.length;\n",
       "      for (var i = 0; i < js_urls.length; i++) {\n",
       "        var url = js_urls[i];\n",
       "        var s = document.createElement('script');\n",
       "        s.src = url;\n",
       "        s.async = false;\n",
       "        s.onreadystatechange = s.onload = function() {\n",
       "          window._bokeh_is_loading--;\n",
       "          if (window._bokeh_is_loading === 0) {\n",
       "            console.log(\"Bokeh: all BokehJS libraries loaded\");\n",
       "            run_callbacks()\n",
       "          }\n",
       "        };\n",
       "        s.onerror = function() {\n",
       "          console.warn(\"failed to load library \" + url);\n",
       "        };\n",
       "        console.log(\"Bokeh: injecting script tag for BokehJS library: \", url);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      }\n",
       "    };var element = document.getElementById(\"fa786a90-0756-4517-805d-83205097e661\");\n",
       "    if (element == null) {\n",
       "      console.log(\"Bokeh: ERROR: autoload.js configured with elementid 'fa786a90-0756-4517-805d-83205097e661' but no matching script tag was found. \")\n",
       "      return false;\n",
       "    }\n",
       "  \n",
       "    var js_urls = [];\n",
       "  \n",
       "    var inline_js = [\n",
       "      function(Bokeh) {\n",
       "        Bokeh.$(function() {\n",
       "            var docs_json = {\"cf64c5aa-b882-464d-8673-8376023c43a5\":{\"roots\":{\"references\":[{\"attributes\":{\"overlay\":{\"id\":\"ebbafac9-c5fc-43a0-8789-9c13ca6df1c3\",\"type\":\"BoxAnnotation\"},\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"0688a33f-9e7c-458e-bf9f-9ee2efb0ee67\",\"type\":\"BoxZoomTool\"},{\"attributes\":{\"items\":[{\"id\":\"dea41a89-20fa-4fd1-a264-d1714df69692\",\"type\":\"LegendItem\"},{\"id\":\"eacfbc78-d5e4-4dc6-a951-3ca56ad7cbbc\",\"type\":\"LegendItem\"},{\"id\":\"893f58ee-de19-439e-afe8-f3ff7da63a35\",\"type\":\"LegendItem\"}],\"location\":\"top_left\",\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"d3365a73-228d-462e-a18c-01fd6faba13e\",\"type\":\"Legend\"},{\"attributes\":{},\"id\":\"186304c3-7c0f-418d-a355-859634738200\",\"type\":\"CategoricalTickFormatter\"},{\"attributes\":{\"data_source\":{\"id\":\"0aab4c21-c8c9-4fc1-a1c4-c622b55b9171\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"72eedf35-df03-4e41-bea0-b23e59623fe2\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"153363ec-bf4f-4b75-8171-35cf9b89564b\",\"type\":\"GlyphRenderer\"},{\"attributes\":{},\"id\":\"16a89f73-3bdd-44de-9db5-522ac51ab3f3\",\"type\":\"BasicTicker\"},{\"attributes\":{\"dimension\":1,\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"16a89f73-3bdd-44de-9db5-522ac51ab3f3\",\"type\":\"BasicTicker\"}},\"id\":\"a1cf4a5d-c509-4b8a-9e6c-63d3a9bcc1fd\",\"type\":\"Grid\"},{\"attributes\":{\"data_source\":{\"id\":\"1a0ea7a2-c022-40a2-af2b-ef6684f3a5ad\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"f16fee80-9516-4bdd-b285-bca51875c307\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"a578a923-8814-4b7c-a99e-af0fd1d931c9\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"below\":[{\"id\":\"c5651914-728f-41ed-bda4-f51b665dc30c\",\"type\":\"CategoricalAxis\"}],\"left\":[{\"id\":\"1bf8ceac-7261-4d2a-a492-f4963683e926\",\"type\":\"LinearAxis\"}],\"renderers\":[{\"id\":\"ebbafac9-c5fc-43a0-8789-9c13ca6df1c3\",\"type\":\"BoxAnnotation\"},{\"id\":\"a578a923-8814-4b7c-a99e-af0fd1d931c9\",\"type\":\"GlyphRenderer\"},{\"id\":\"153363ec-bf4f-4b75-8171-35cf9b89564b\",\"type\":\"GlyphRenderer\"},{\"id\":\"0484d68d-7ca6-469f-930f-4ac8819902f2\",\"type\":\"GlyphRenderer\"},{\"id\":\"d3365a73-228d-462e-a18c-01fd6faba13e\",\"type\":\"Legend\"},{\"id\":\"c5651914-728f-41ed-bda4-f51b665dc30c\",\"type\":\"CategoricalAxis\"},{\"id\":\"1bf8ceac-7261-4d2a-a492-f4963683e926\",\"type\":\"LinearAxis\"},{\"id\":\"3ce98c86-812e-47ba-959d-a302352162ae\",\"type\":\"Grid\"},{\"id\":\"a1cf4a5d-c509-4b8a-9e6c-63d3a9bcc1fd\",\"type\":\"Grid\"}],\"title\":{\"id\":\"9edb2495-b0d7-44bf-a064-692551d43f72\",\"type\":\"Title\"},\"tool_events\":{\"id\":\"96ab3278-74e8-47b4-b9a2-89bd360b85ca\",\"type\":\"ToolEvents\"},\"toolbar\":{\"id\":\"0c0be4bd-d928-4866-a6d4-d6b819dbd107\",\"type\":\"Toolbar\"},\"x_mapper_type\":\"auto\",\"x_range\":{\"id\":\"ec09533d-e538-4058-8e99-ad9cf8f12814\",\"type\":\"FactorRange\"},\"y_mapper_type\":\"auto\",\"y_range\":{\"id\":\"0172ddfb-94af-4fef-91f0-161389c8e7bc\",\"type\":\"Range1d\"}},\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#407ee7\"},\"line_color\":{\"value\":\"#407ee7\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"fc773614-b6ff-4744-9ee6-bcc105fdb769\",\"type\":\"Circle\"},{\"attributes\":{\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"99cc9a7d-bb2d-41ba-a5a6-1ca3268964c2\",\"type\":\"ResetTool\"},{\"attributes\":{\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"98a12dff-be5e-48ab-a7ce-6d8423e04e8d\",\"type\":\"SaveTool\"},{\"attributes\":{\"callback\":null,\"end\":2659899369.95608,\"start\":-457471719.0869163},\"id\":\"0172ddfb-94af-4fef-91f0-161389c8e7bc\",\"type\":\"Range1d\"},{\"attributes\":{\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"b4a55728-8692-4455-8ae8-f756809aa2b6\",\"type\":\"WheelZoomTool\"},{\"attributes\":{\"axis_label\":\"AGI Bin\",\"formatter\":{\"id\":\"186304c3-7c0f-418d-a355-859634738200\",\"type\":\"CategoricalTickFormatter\"},\"major_label_orientation\":0.7853981633974483,\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"3b42e7f5-ca2e-4441-9633-158c87e87921\",\"type\":\"CategoricalTicker\"}},\"id\":\"c5651914-728f-41ed-bda4-f51b665dc30c\",\"type\":\"CategoricalAxis\"},{\"attributes\":{\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"e610ec7c-3df9-401c-83c1-00486cf840ad\",\"type\":\"PanTool\"},{\"attributes\":{\"label\":{\"value\":\"TC-Adjustment\"},\"renderers\":[{\"id\":\"153363ec-bf4f-4b75-8171-35cf9b89564b\",\"type\":\"GlyphRenderer\"}]},\"id\":\"eacfbc78-d5e4-4dc6-a951-3ca56ad7cbbc\",\"type\":\"LegendItem\"},{\"attributes\":{\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"3b42e7f5-ca2e-4441-9633-158c87e87921\",\"type\":\"CategoricalTicker\"}},\"id\":\"3ce98c86-812e-47ba-959d-a302352162ae\",\"type\":\"Grid\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[-148113451.5156844,39229748.591271445,96964011.62426816,156200540.9874821,189677394.7286986,191018785.63152054,232229451.3396739,456553755.35042393,464310879.2082908,1153888821.635599,1006226817.2935853,2391397550.1105976,1579809222.7635033,623544678.5056728,279400498.0027344,169203895.18084657,434535725.60060394,243808951.43886182,457842567.53956085]}},\"id\":\"0aab4c21-c8c9-4fc1-a1c4-c622b55b9171\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[-147212218.58853686,39906606.49683181,97336074.69629307,156268237.09155318,189418689.96325997,192983132.5640801,233114824.04605138,456865429.17778164,466110042.0222917,1160116600.07288,1011161961.9943421,2400118445.8691635,1579977544.335839,621102347.7069019,279518825.595146,168930713.92411813,432593099.0166709,242188453.32454646,441140178.40028924]}},\"id\":\"26981750-926a-482b-83de-7a7fdbfc06ed\",\"type\":\"ColumnDataSource\"},{\"attributes\":{},\"id\":\"ef685827-cab4-4fa7-be80-630ca9dafd2d\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"active_drag\":\"auto\",\"active_scroll\":\"auto\",\"active_tap\":\"auto\",\"tools\":[{\"id\":\"e610ec7c-3df9-401c-83c1-00486cf840ad\",\"type\":\"PanTool\"},{\"id\":\"b4a55728-8692-4455-8ae8-f756809aa2b6\",\"type\":\"WheelZoomTool\"},{\"id\":\"0688a33f-9e7c-458e-bf9f-9ee2efb0ee67\",\"type\":\"BoxZoomTool\"},{\"id\":\"98a12dff-be5e-48ab-a7ce-6d8423e04e8d\",\"type\":\"SaveTool\"},{\"id\":\"99cc9a7d-bb2d-41ba-a5a6-1ca3268964c2\",\"type\":\"ResetTool\"},{\"id\":\"060a6576-a5cd-4f2b-a129-8048e697d0e1\",\"type\":\"HelpTool\"}]},\"id\":\"0c0be4bd-d928-4866-a6d4-d6b819dbd107\",\"type\":\"Toolbar\"},{\"attributes\":{\"label\":{\"value\":\"SOI\"},\"renderers\":[{\"id\":\"a578a923-8814-4b7c-a99e-af0fd1d931c9\",\"type\":\"GlyphRenderer\"}]},\"id\":\"dea41a89-20fa-4fd1-a264-d1714df69692\",\"type\":\"LegendItem\"},{\"attributes\":{\"bottom_units\":\"screen\",\"fill_alpha\":{\"value\":0.5},\"fill_color\":{\"value\":\"lightgrey\"},\"left_units\":\"screen\",\"level\":\"overlay\",\"line_alpha\":{\"value\":1.0},\"line_color\":{\"value\":\"black\"},\"line_dash\":[4,4],\"line_width\":{\"value\":2},\"plot\":null,\"render_mode\":\"css\",\"right_units\":\"screen\",\"top_units\":\"screen\"},\"id\":\"ebbafac9-c5fc-43a0-8789-9c13ca6df1c3\",\"type\":\"BoxAnnotation\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#f22c40\"},\"line_color\":{\"value\":\"#f22c40\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"f16fee80-9516-4bdd-b285-bca51875c307\",\"type\":\"Circle\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#5ab738\"},\"line_color\":{\"value\":\"#5ab738\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"72eedf35-df03-4e41-bea0-b23e59623fe2\",\"type\":\"Circle\"},{\"attributes\":{\"axis_label\":\"Total AGI\",\"formatter\":{\"id\":\"ef685827-cab4-4fa7-be80-630ca9dafd2d\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"16a89f73-3bdd-44de-9db5-522ac51ab3f3\",\"type\":\"BasicTicker\"}},\"id\":\"1bf8ceac-7261-4d2a-a492-f4963683e926\",\"type\":\"LinearAxis\"},{\"attributes\":{\"label\":{\"value\":\"TC-No Adjustment\"},\"renderers\":[{\"id\":\"0484d68d-7ca6-469f-930f-4ac8819902f2\",\"type\":\"GlyphRenderer\"}]},\"id\":\"893f58ee-de19-439e-afe8-f3ff7da63a35\",\"type\":\"LegendItem\"},{\"attributes\":{},\"id\":\"96ab3278-74e8-47b4-b9a2-89bd360b85ca\",\"type\":\"ToolEvents\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\"],\"chart_index\":[{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[-197690795.0,26379097.0,89719121.0,153830822.0,197774439.0,226042578.0,241769583.0,507486039.0,513959724.0,1191956661.0,1111626170.0,2361756261.0,1419776711.0,562622816.0,217426739.0,132463053.0,326511879.0,181943504.0,505681010.0]}},\"id\":\"1a0ea7a2-c022-40a2-af2b-ef6684f3a5ad\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"plot\":{\"id\":\"7145df2b-06ed-4385-9908-17de504b3491\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"060a6576-a5cd-4f2b-a129-8048e697d0e1\",\"type\":\"HelpTool\"},{\"attributes\":{\"plot\":null,\"text\":\"Total AGI by AGI Bin (Thousand of Dollars)\"},\"id\":\"9edb2495-b0d7-44bf-a064-692551d43f72\",\"type\":\"Title\"},{\"attributes\":{},\"id\":\"3b42e7f5-ca2e-4441-9633-158c87e87921\",\"type\":\"CategoricalTicker\"},{\"attributes\":{\"data_source\":{\"id\":\"26981750-926a-482b-83de-7a7fdbfc06ed\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"fc773614-b6ff-4744-9ee6-bcc105fdb769\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"0484d68d-7ca6-469f-930f-4ac8819902f2\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"callback\":null,\"factors\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"]},\"id\":\"ec09533d-e538-4058-8e99-ad9cf8f12814\",\"type\":\"FactorRange\"}],\"root_ids\":[\"7145df2b-06ed-4385-9908-17de504b3491\"]},\"title\":\"Bokeh Application\",\"version\":\"0.12.3\"}};\n",
       "            var render_items = [{\"docid\":\"cf64c5aa-b882-464d-8673-8376023c43a5\",\"elementid\":\"fa786a90-0756-4517-805d-83205097e661\",\"modelid\":\"7145df2b-06ed-4385-9908-17de504b3491\"}];\n",
       "            \n",
       "            Bokeh.embed.embed_items(docs_json, render_items);\n",
       "        });\n",
       "      },\n",
       "      function(Bokeh) {\n",
       "      }\n",
       "    ];\n",
       "  \n",
       "    function run_inline_js() {\n",
       "      \n",
       "      if ((window.Bokeh !== undefined) || (force === \"1\")) {\n",
       "        for (var i = 0; i < inline_js.length; i++) {\n",
       "          inline_js[i](window.Bokeh);\n",
       "        }if (force === \"1\") {\n",
       "          display_loaded();\n",
       "        }} else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(run_inline_js, 100);\n",
       "      } else if (!window._bokeh_failed_load) {\n",
       "        console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n",
       "        window._bokeh_failed_load = true;\n",
       "      } else if (!force) {\n",
       "        var cell = $(\"#fa786a90-0756-4517-805d-83205097e661\").parents('.cell').data().cell;\n",
       "        cell.output_area.append_execute_result(NB_LOAD_WARNING)\n",
       "      }\n",
       "  \n",
       "    }\n",
       "  \n",
       "    if (window._bokeh_is_loading === 0) {\n",
       "      console.log(\"Bokeh: BokehJS loaded, going straight to plotting\");\n",
       "      run_inline_js();\n",
       "    } else {\n",
       "      load_libs(js_urls, function() {\n",
       "        console.log(\"Bokeh: BokehJS plotting callback run at\", now());\n",
       "        run_inline_js();\n",
       "      });\n",
       "    }\n",
       "  }(this));\n",
       "</script>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "soi_agi = pd.DataFrame()\n",
    "soi_agi['Percent of Total AGI'] = soi['AGI'] / soi['AGI'].sum() * 100\n",
    "soi_agi['Measure'] = 'SOI'\n",
    "soi_agi['AGI Bin'] = index_list\n",
    "tc_agi = pd.DataFrame()\n",
    "tc_agi['Percent of Total AGI'] = tc['AGI'] / tc['AGI'].sum() * 100\n",
    "tc_agi['Measure'] = 'TC-Adjustment'\n",
    "tc_agi['AGI Bin'] = index_list\n",
    "tc_none_agi = pd.DataFrame()\n",
    "tc_none_agi['Percent of Total AGI'] = tc_none['AGI'] / tc_none['AGI'].sum() * 100\n",
    "tc_none_agi['Measure'] = 'TC-No Adjustment'\n",
    "tc_none_agi['AGI Bin'] = index_list\n",
    "data_agi = [soi_agi, tc_agi, tc_none_agi]\n",
    "plot_data_agi = pd.concat(data_agi)\n",
    "plot_agi = Scatter(plot_data_agi, x='AGI Bin', y='Percent of Total AGI', color='Measure', \n",
    "                   title='Percent of Total AGI by AGI Bin')\n",
    "show(plot_agi)\n",
    "\n",
    "soi_agi_sum = pd.DataFrame()\n",
    "soi_agi_sum['Total AGI'] = soi['AGI']\n",
    "soi_agi_sum['Measure'] = 'SOI'\n",
    "soi_agi_sum['AGI Bin'] = index_list\n",
    "tc_agi_sum = pd.DataFrame()\n",
    "tc_agi_sum['Total AGI'] = tc['AGI']\n",
    "tc_agi_sum['Measure'] = 'TC-Adjustment'\n",
    "tc_agi_sum['AGI Bin'] = index_list\n",
    "tc_none_agi_sum = pd.DataFrame()\n",
    "tc_none_agi_sum['Total AGI'] = tc_none['AGI']\n",
    "tc_none_agi_sum['Measure'] = 'TC-No Adjustment'\n",
    "tc_none_agi_sum['AGI Bin'] = index_list\n",
    "data_agi_sum = [soi_agi_sum, tc_agi_sum, tc_none_agi_sum]\n",
    "plot_data_agi_sum = pd.concat(data_agi_sum)\n",
    "plot_agi_sum = Scatter(plot_data_agi_sum, x='AGI Bin', y='Total AGI', color='Measure', \n",
    "                   title='Total AGI by AGI Bin (Thousand of Dollars)')\n",
    "show(plot_agi_sum)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Interest Income Distribution"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "\n",
       "    <div class=\"bk-root\">\n",
       "        <div class=\"plotdiv\" id=\"177de30c-dda9-422b-88cc-2dd4810fb27d\"></div>\n",
       "    </div>\n",
       "<script type=\"text/javascript\">\n",
       "  \n",
       "  (function(global) {\n",
       "    function now() {\n",
       "      return new Date();\n",
       "    }\n",
       "  \n",
       "    var force = \"\";\n",
       "  \n",
       "    if (typeof (window._bokeh_onload_callbacks) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_onload_callbacks = [];\n",
       "      window._bokeh_is_loading = undefined;\n",
       "    }\n",
       "  \n",
       "  \n",
       "    \n",
       "    if (typeof (window._bokeh_timeout) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_timeout = Date.now() + 0;\n",
       "      window._bokeh_failed_load = false;\n",
       "    }\n",
       "  \n",
       "    var NB_LOAD_WARNING = {'data': {'text/html':\n",
       "       \"<div style='background-color: #fdd'>\\n\"+\n",
       "       \"<p>\\n\"+\n",
       "       \"BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \\n\"+\n",
       "       \"may be due to a slow or bad network connection. Possible fixes:\\n\"+\n",
       "       \"</p>\\n\"+\n",
       "       \"<ul>\\n\"+\n",
       "       \"<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\\n\"+\n",
       "       \"<li>use INLINE resources instead, as so:</li>\\n\"+\n",
       "       \"</ul>\\n\"+\n",
       "       \"<code>\\n\"+\n",
       "       \"from bokeh.resources import INLINE\\n\"+\n",
       "       \"output_notebook(resources=INLINE)\\n\"+\n",
       "       \"</code>\\n\"+\n",
       "       \"</div>\"}};\n",
       "  \n",
       "    function display_loaded() {\n",
       "      if (window.Bokeh !== undefined) {\n",
       "        Bokeh.$(\"#177de30c-dda9-422b-88cc-2dd4810fb27d\").text(\"BokehJS successfully loaded.\");\n",
       "      } else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(display_loaded, 100)\n",
       "      }\n",
       "    }\n",
       "  \n",
       "    function run_callbacks() {\n",
       "      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });\n",
       "      delete window._bokeh_onload_callbacks\n",
       "      console.info(\"Bokeh: all callbacks have finished\");\n",
       "    }\n",
       "  \n",
       "    function load_libs(js_urls, callback) {\n",
       "      window._bokeh_onload_callbacks.push(callback);\n",
       "      if (window._bokeh_is_loading > 0) {\n",
       "        console.log(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n",
       "        return null;\n",
       "      }\n",
       "      if (js_urls == null || js_urls.length === 0) {\n",
       "        run_callbacks();\n",
       "        return null;\n",
       "      }\n",
       "      console.log(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n",
       "      window._bokeh_is_loading = js_urls.length;\n",
       "      for (var i = 0; i < js_urls.length; i++) {\n",
       "        var url = js_urls[i];\n",
       "        var s = document.createElement('script');\n",
       "        s.src = url;\n",
       "        s.async = false;\n",
       "        s.onreadystatechange = s.onload = function() {\n",
       "          window._bokeh_is_loading--;\n",
       "          if (window._bokeh_is_loading === 0) {\n",
       "            console.log(\"Bokeh: all BokehJS libraries loaded\");\n",
       "            run_callbacks()\n",
       "          }\n",
       "        };\n",
       "        s.onerror = function() {\n",
       "          console.warn(\"failed to load library \" + url);\n",
       "        };\n",
       "        console.log(\"Bokeh: injecting script tag for BokehJS library: \", url);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      }\n",
       "    };var element = document.getElementById(\"177de30c-dda9-422b-88cc-2dd4810fb27d\");\n",
       "    if (element == null) {\n",
       "      console.log(\"Bokeh: ERROR: autoload.js configured with elementid '177de30c-dda9-422b-88cc-2dd4810fb27d' but no matching script tag was found. \")\n",
       "      return false;\n",
       "    }\n",
       "  \n",
       "    var js_urls = [];\n",
       "  \n",
       "    var inline_js = [\n",
       "      function(Bokeh) {\n",
       "        Bokeh.$(function() {\n",
       "            var docs_json = {\"2552b25e-e3e2-4b9a-a521-7625d965f4a0\":{\"roots\":{\"references\":[{\"attributes\":{\"dimension\":1,\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"7224b8f7-e4d0-4ffb-a261-c39b2a454b03\",\"type\":\"BasicTicker\"}},\"id\":\"f5b2fd54-3874-4b22-b5a6-845317f27338\",\"type\":\"Grid\"},{\"attributes\":{\"callback\":null,\"factors\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"]},\"id\":\"9507bcf0-fed7-408e-a0a6-ec9916654a31\",\"type\":\"FactorRange\"},{\"attributes\":{\"bottom_units\":\"screen\",\"fill_alpha\":{\"value\":0.5},\"fill_color\":{\"value\":\"lightgrey\"},\"left_units\":\"screen\",\"level\":\"overlay\",\"line_alpha\":{\"value\":1.0},\"line_color\":{\"value\":\"black\"},\"line_dash\":[4,4],\"line_width\":{\"value\":2},\"plot\":null,\"render_mode\":\"css\",\"right_units\":\"screen\",\"top_units\":\"screen\"},\"id\":\"92ef06f4-82bf-4dc3-8699-2f29303de56b\",\"type\":\"BoxAnnotation\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[4.915700503077946,3.0449360697289616,3.3429543321386883,2.9910846107757525,2.9680339821893833,2.730578308962728,2.465642424655834,3.881433809925089,4.105982824709027,9.117663504308506,7.505190272039671,14.24014153373348,11.159413283679347,6.64823136175903,3.274296019192935,2.48374777010407,5.838222576144694,3.5070339349495647,5.779712877925291]}},\"id\":\"e1f5d34b-1a9f-40a6-8771-fbafaf3a4da5\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"data_source\":{\"id\":\"72b11ec3-0302-48bb-a0bb-465ed6ad5e9c\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"b192a8cd-06df-46fb-b476-43143bc77f6a\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"01bebb23-58e7-4045-bb20-4f407c3eb179\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"b8e5f7f6-6b0d-4553-b699-69a6cef05ea4\",\"type\":\"ResetTool\"},{\"attributes\":{\"plot\":null,\"text\":\"Percent of Total Interest Income by AGI Bin\"},\"id\":\"a197c852-52cb-4525-987c-e1222e1549e1\",\"type\":\"Title\"},{\"attributes\":{\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"9990c11e-3999-48e6-a036-0a114e2b0490\",\"type\":\"PanTool\"},{\"attributes\":{\"callback\":null,\"end\":23.843851072493955,\"start\":-1.5383402344551345},\"id\":\"eb8ddb61-9a6a-4fce-87cb-ab89e1bac2c3\",\"type\":\"Range1d\"},{\"attributes\":{\"items\":[{\"id\":\"d2f7895d-e8fe-4b68-ae2c-0cbb5f12c1f3\",\"type\":\"LegendItem\"},{\"id\":\"b3eb2379-0d31-4df4-aa6c-05d91e75b025\",\"type\":\"LegendItem\"},{\"id\":\"43daa674-3d98-4a88-a132-32d34471466f\",\"type\":\"LegendItem\"}],\"location\":\"top_left\",\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"72e46f29-2daf-4f78-98d9-2a644834d7be\",\"type\":\"Legend\"},{\"attributes\":{\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"680864cc-a8cd-4422-80a9-cb452fe8564c\",\"type\":\"WheelZoomTool\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[4.128228664697351,1.3685887857815042,1.3960269087534969,1.3744634849063682,1.4575310865218702,1.1324721028045925,1.2654010565888147,1.9069897830514442,2.0229305161699287,5.114594689669015,4.887714838659871,12.367568788837222,12.793290140144997,7.662899549507903,3.6403960685776484,2.976011145076491,7.848190941318048,4.928032985351904,21.72866846358153]}},\"id\":\"f7fc81cd-1af8-46f8-94c0-3ba3c30172b5\",\"type\":\"ColumnDataSource\"},{\"attributes\":{},\"id\":\"653e984e-c68d-44f2-8092-4c5cff5f5387\",\"type\":\"CategoricalTickFormatter\"},{\"attributes\":{\"label\":{\"value\":\"TC-No Adjustment\"},\"renderers\":[{\"id\":\"d79f4def-fd04-4cab-b9ba-c6c9446ab830\",\"type\":\"GlyphRenderer\"}]},\"id\":\"43daa674-3d98-4a88-a132-32d34471466f\",\"type\":\"LegendItem\"},{\"attributes\":{\"data_source\":{\"id\":\"f7fc81cd-1af8-46f8-94c0-3ba3c30172b5\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"13b7be86-99d3-402e-9654-14946bce7cc0\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"ffdb1200-e2fd-4b3a-bc21-ee302b2cd4e2\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"below\":[{\"id\":\"ead17820-7f3b-48c1-9534-382faae66592\",\"type\":\"CategoricalAxis\"}],\"left\":[{\"id\":\"e1c18b28-3e10-445c-ba32-2b97714eda8b\",\"type\":\"LinearAxis\"}],\"renderers\":[{\"id\":\"92ef06f4-82bf-4dc3-8699-2f29303de56b\",\"type\":\"BoxAnnotation\"},{\"id\":\"01bebb23-58e7-4045-bb20-4f407c3eb179\",\"type\":\"GlyphRenderer\"},{\"id\":\"ffdb1200-e2fd-4b3a-bc21-ee302b2cd4e2\",\"type\":\"GlyphRenderer\"},{\"id\":\"d79f4def-fd04-4cab-b9ba-c6c9446ab830\",\"type\":\"GlyphRenderer\"},{\"id\":\"72e46f29-2daf-4f78-98d9-2a644834d7be\",\"type\":\"Legend\"},{\"id\":\"ead17820-7f3b-48c1-9534-382faae66592\",\"type\":\"CategoricalAxis\"},{\"id\":\"e1c18b28-3e10-445c-ba32-2b97714eda8b\",\"type\":\"LinearAxis\"},{\"id\":\"3c1d1be5-b070-4ca3-8145-3da875597012\",\"type\":\"Grid\"},{\"id\":\"f5b2fd54-3874-4b22-b5a6-845317f27338\",\"type\":\"Grid\"}],\"title\":{\"id\":\"a197c852-52cb-4525-987c-e1222e1549e1\",\"type\":\"Title\"},\"tool_events\":{\"id\":\"6bc37a88-ad6d-4795-a52a-f14c914d5649\",\"type\":\"ToolEvents\"},\"toolbar\":{\"id\":\"5f010f60-4256-432f-bc57-3f7e04444247\",\"type\":\"Toolbar\"},\"x_mapper_type\":\"auto\",\"x_range\":{\"id\":\"9507bcf0-fed7-408e-a0a6-ec9916654a31\",\"type\":\"FactorRange\"},\"y_mapper_type\":\"auto\",\"y_range\":{\"id\":\"eb8ddb61-9a6a-4fce-87cb-ab89e1bac2c3\",\"type\":\"Range1d\"}},\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#407ee7\"},\"line_color\":{\"value\":\"#407ee7\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"b373f88c-d0d9-4ec9-8284-aea17acc980e\",\"type\":\"Circle\"},{\"attributes\":{\"label\":{\"value\":\"SOI\"},\"renderers\":[{\"id\":\"01bebb23-58e7-4045-bb20-4f407c3eb179\",\"type\":\"GlyphRenderer\"}]},\"id\":\"d2f7895d-e8fe-4b68-ae2c-0cbb5f12c1f3\",\"type\":\"LegendItem\"},{\"attributes\":{},\"id\":\"437693be-1262-4e9c-9d1f-22227fab3cd8\",\"type\":\"CategoricalTicker\"},{\"attributes\":{\"data_source\":{\"id\":\"e1f5d34b-1a9f-40a6-8771-fbafaf3a4da5\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"b373f88c-d0d9-4ec9-8284-aea17acc980e\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"d79f4def-fd04-4cab-b9ba-c6c9446ab830\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"axis_label\":\"Percent of Total Interest Income\",\"formatter\":{\"id\":\"ffa6c600-9ada-4cb6-9e84-05adb6d88d73\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"7224b8f7-e4d0-4ffb-a261-c39b2a454b03\",\"type\":\"BasicTicker\"}},\"id\":\"e1c18b28-3e10-445c-ba32-2b97714eda8b\",\"type\":\"LinearAxis\"},{\"attributes\":{\"active_drag\":\"auto\",\"active_scroll\":\"auto\",\"active_tap\":\"auto\",\"tools\":[{\"id\":\"9990c11e-3999-48e6-a036-0a114e2b0490\",\"type\":\"PanTool\"},{\"id\":\"680864cc-a8cd-4422-80a9-cb452fe8564c\",\"type\":\"WheelZoomTool\"},{\"id\":\"161a0f58-3fe2-4ce0-8801-f38c4a3f7312\",\"type\":\"BoxZoomTool\"},{\"id\":\"bbdf418a-97c7-40f8-a8e5-246536f4dac1\",\"type\":\"SaveTool\"},{\"id\":\"b8e5f7f6-6b0d-4553-b699-69a6cef05ea4\",\"type\":\"ResetTool\"},{\"id\":\"81e4e561-5100-4365-97b0-58457e6565fd\",\"type\":\"HelpTool\"}]},\"id\":\"5f010f60-4256-432f-bc57-3f7e04444247\",\"type\":\"Toolbar\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#5ab738\"},\"line_color\":{\"value\":\"#5ab738\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"13b7be86-99d3-402e-9654-14946bce7cc0\",\"type\":\"Circle\"},{\"attributes\":{\"axis_label\":\"AGI Level\",\"formatter\":{\"id\":\"653e984e-c68d-44f2-8092-4c5cff5f5387\",\"type\":\"CategoricalTickFormatter\"},\"major_label_orientation\":0.7853981633974483,\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"437693be-1262-4e9c-9d1f-22227fab3cd8\",\"type\":\"CategoricalTicker\"}},\"id\":\"ead17820-7f3b-48c1-9534-382faae66592\",\"type\":\"CategoricalAxis\"},{\"attributes\":{},\"id\":\"7224b8f7-e4d0-4ffb-a261-c39b2a454b03\",\"type\":\"BasicTicker\"},{\"attributes\":{\"overlay\":{\"id\":\"92ef06f4-82bf-4dc3-8699-2f29303de56b\",\"type\":\"BoxAnnotation\"},\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"161a0f58-3fe2-4ce0-8801-f38c4a3f7312\",\"type\":\"BoxZoomTool\"},{\"attributes\":{\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"81e4e561-5100-4365-97b0-58457e6565fd\",\"type\":\"HelpTool\"},{\"attributes\":{\"label\":{\"value\":\"TC-Adjustment\"},\"renderers\":[{\"id\":\"ffdb1200-e2fd-4b3a-bc21-ee302b2cd4e2\",\"type\":\"GlyphRenderer\"}]},\"id\":\"b3eb2379-0d31-4df4-aa6c-05d91e75b025\",\"type\":\"LegendItem\"},{\"attributes\":{\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"bbdf418a-97c7-40f8-a8e5-246536f4dac1\",\"type\":\"SaveTool\"},{\"attributes\":{},\"id\":\"ffa6c600-9ada-4cb6-9e84-05adb6d88d73\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\"],\"chart_index\":[{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[4.993130518779946,0.5768423744572899,0.8203502831019069,1.0678797359340768,1.2221777383864307,1.1989654620178625,1.4280007107142128,2.232499123136158,2.024080678566568,6.343146714122024,5.339033375206313,14.260913292471988,13.553393097498665,7.257342968524355,4.074768941465136,2.750102532868855,7.560213385094243,4.843353558455813,18.45380550919816]}},\"id\":\"72b11ec3-0302-48bb-a0bb-465ed6ad5e9c\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"plot\":{\"id\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"437693be-1262-4e9c-9d1f-22227fab3cd8\",\"type\":\"CategoricalTicker\"}},\"id\":\"3c1d1be5-b070-4ca3-8145-3da875597012\",\"type\":\"Grid\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#f22c40\"},\"line_color\":{\"value\":\"#f22c40\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"b192a8cd-06df-46fb-b476-43143bc77f6a\",\"type\":\"Circle\"},{\"attributes\":{},\"id\":\"6bc37a88-ad6d-4795-a52a-f14c914d5649\",\"type\":\"ToolEvents\"}],\"root_ids\":[\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\"]},\"title\":\"Bokeh Application\",\"version\":\"0.12.3\"}};\n",
       "            var render_items = [{\"docid\":\"2552b25e-e3e2-4b9a-a521-7625d965f4a0\",\"elementid\":\"177de30c-dda9-422b-88cc-2dd4810fb27d\",\"modelid\":\"e1e14411-8c90-4e4f-87d9-15a3b7501f5c\"}];\n",
       "            \n",
       "            Bokeh.embed.embed_items(docs_json, render_items);\n",
       "        });\n",
       "      },\n",
       "      function(Bokeh) {\n",
       "      }\n",
       "    ];\n",
       "  \n",
       "    function run_inline_js() {\n",
       "      \n",
       "      if ((window.Bokeh !== undefined) || (force === \"1\")) {\n",
       "        for (var i = 0; i < inline_js.length; i++) {\n",
       "          inline_js[i](window.Bokeh);\n",
       "        }if (force === \"1\") {\n",
       "          display_loaded();\n",
       "        }} else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(run_inline_js, 100);\n",
       "      } else if (!window._bokeh_failed_load) {\n",
       "        console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n",
       "        window._bokeh_failed_load = true;\n",
       "      } else if (!force) {\n",
       "        var cell = $(\"#177de30c-dda9-422b-88cc-2dd4810fb27d\").parents('.cell').data().cell;\n",
       "        cell.output_area.append_execute_result(NB_LOAD_WARNING)\n",
       "      }\n",
       "  \n",
       "    }\n",
       "  \n",
       "    if (window._bokeh_is_loading === 0) {\n",
       "      console.log(\"Bokeh: BokehJS loaded, going straight to plotting\");\n",
       "      run_inline_js();\n",
       "    } else {\n",
       "      load_libs(js_urls, function() {\n",
       "        console.log(\"Bokeh: BokehJS plotting callback run at\", now());\n",
       "        run_inline_js();\n",
       "      });\n",
       "    }\n",
       "  }(this));\n",
       "</script>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "\n",
       "\n",
       "    <div class=\"bk-root\">\n",
       "        <div class=\"plotdiv\" id=\"1ae7f352-ca6d-4c13-bcb6-9a3e567feff2\"></div>\n",
       "    </div>\n",
       "<script type=\"text/javascript\">\n",
       "  \n",
       "  (function(global) {\n",
       "    function now() {\n",
       "      return new Date();\n",
       "    }\n",
       "  \n",
       "    var force = \"\";\n",
       "  \n",
       "    if (typeof (window._bokeh_onload_callbacks) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_onload_callbacks = [];\n",
       "      window._bokeh_is_loading = undefined;\n",
       "    }\n",
       "  \n",
       "  \n",
       "    \n",
       "    if (typeof (window._bokeh_timeout) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_timeout = Date.now() + 0;\n",
       "      window._bokeh_failed_load = false;\n",
       "    }\n",
       "  \n",
       "    var NB_LOAD_WARNING = {'data': {'text/html':\n",
       "       \"<div style='background-color: #fdd'>\\n\"+\n",
       "       \"<p>\\n\"+\n",
       "       \"BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \\n\"+\n",
       "       \"may be due to a slow or bad network connection. Possible fixes:\\n\"+\n",
       "       \"</p>\\n\"+\n",
       "       \"<ul>\\n\"+\n",
       "       \"<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\\n\"+\n",
       "       \"<li>use INLINE resources instead, as so:</li>\\n\"+\n",
       "       \"</ul>\\n\"+\n",
       "       \"<code>\\n\"+\n",
       "       \"from bokeh.resources import INLINE\\n\"+\n",
       "       \"output_notebook(resources=INLINE)\\n\"+\n",
       "       \"</code>\\n\"+\n",
       "       \"</div>\"}};\n",
       "  \n",
       "    function display_loaded() {\n",
       "      if (window.Bokeh !== undefined) {\n",
       "        Bokeh.$(\"#1ae7f352-ca6d-4c13-bcb6-9a3e567feff2\").text(\"BokehJS successfully loaded.\");\n",
       "      } else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(display_loaded, 100)\n",
       "      }\n",
       "    }\n",
       "  \n",
       "    function run_callbacks() {\n",
       "      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });\n",
       "      delete window._bokeh_onload_callbacks\n",
       "      console.info(\"Bokeh: all callbacks have finished\");\n",
       "    }\n",
       "  \n",
       "    function load_libs(js_urls, callback) {\n",
       "      window._bokeh_onload_callbacks.push(callback);\n",
       "      if (window._bokeh_is_loading > 0) {\n",
       "        console.log(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n",
       "        return null;\n",
       "      }\n",
       "      if (js_urls == null || js_urls.length === 0) {\n",
       "        run_callbacks();\n",
       "        return null;\n",
       "      }\n",
       "      console.log(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n",
       "      window._bokeh_is_loading = js_urls.length;\n",
       "      for (var i = 0; i < js_urls.length; i++) {\n",
       "        var url = js_urls[i];\n",
       "        var s = document.createElement('script');\n",
       "        s.src = url;\n",
       "        s.async = false;\n",
       "        s.onreadystatechange = s.onload = function() {\n",
       "          window._bokeh_is_loading--;\n",
       "          if (window._bokeh_is_loading === 0) {\n",
       "            console.log(\"Bokeh: all BokehJS libraries loaded\");\n",
       "            run_callbacks()\n",
       "          }\n",
       "        };\n",
       "        s.onerror = function() {\n",
       "          console.warn(\"failed to load library \" + url);\n",
       "        };\n",
       "        console.log(\"Bokeh: injecting script tag for BokehJS library: \", url);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      }\n",
       "    };var element = document.getElementById(\"1ae7f352-ca6d-4c13-bcb6-9a3e567feff2\");\n",
       "    if (element == null) {\n",
       "      console.log(\"Bokeh: ERROR: autoload.js configured with elementid '1ae7f352-ca6d-4c13-bcb6-9a3e567feff2' but no matching script tag was found. \")\n",
       "      return false;\n",
       "    }\n",
       "  \n",
       "    var js_urls = [];\n",
       "  \n",
       "    var inline_js = [\n",
       "      function(Bokeh) {\n",
       "        Bokeh.$(function() {\n",
       "            var docs_json = {\"c68d1729-d317-4edd-bf13-033a9979829c\":{\"roots\":{\"references\":[{\"attributes\":{\"data_source\":{\"id\":\"3f43f558-51ed-49e9-9a30-17320c0b364d\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"12d9d984-5f36-499c-bae4-badb29e57329\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"e05bb746-4c48-4fe3-a12d-cad3f9123503\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"17e84021-d311-4299-92ed-d7f3f84dd901\",\"type\":\"ResetTool\"},{\"attributes\":{},\"id\":\"8f90f5af-1b32-4b1b-8bc1-fe3d280fb282\",\"type\":\"BasicTicker\"},{\"attributes\":{\"axis_label\":\"Total Interest Income\",\"formatter\":{\"id\":\"fecb030c-6289-4816-9f65-28fa30dc35ee\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"8f90f5af-1b32-4b1b-8bc1-fe3d280fb282\",\"type\":\"BasicTicker\"}},\"id\":\"df98fea2-2af9-499c-b5eb-144e355b200a\",\"type\":\"LinearAxis\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\",\"SOI\"],\"chart_index\":[{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"},{\"Measure\":\"SOI\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[4688264.0,541622.0,770262.0,1002678.0,1147555.0,1125760.0,1340811.0,2096189.0,1900496.0,5955852.0,5013047.0,13390182.0,12725861.0,6814230.0,3825975.0,2582189.0,7098608.0,4547632.0,17327068.0]}},\"id\":\"160a34e9-8d1d-40c5-8dcc-9e6b8907e6c9\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#f22c40\"},\"line_color\":{\"value\":\"#f22c40\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"2767aa83-3d1a-40b9-b24e-0d35bc746633\",\"type\":\"Circle\"},{\"attributes\":{\"label\":{\"value\":\"TC-No Adjustment\"},\"renderers\":[{\"id\":\"1e66bb35-2d2d-437a-b81c-8f7f21472751\",\"type\":\"GlyphRenderer\"}]},\"id\":\"fb806206-ae62-4cd8-be39-474faa8f3c06\",\"type\":\"LegendItem\"},{\"attributes\":{\"label\":{\"value\":\"SOI\"},\"renderers\":[{\"id\":\"22ea6a72-2a53-407a-9876-aa96dc16a580\",\"type\":\"GlyphRenderer\"}]},\"id\":\"e904f9f0-11d9-4bbd-8cfe-8928eee55279\",\"type\":\"LegendItem\"},{\"attributes\":{\"bottom_units\":\"screen\",\"fill_alpha\":{\"value\":0.5},\"fill_color\":{\"value\":\"lightgrey\"},\"left_units\":\"screen\",\"level\":\"overlay\",\"line_alpha\":{\"value\":1.0},\"line_color\":{\"value\":\"black\"},\"line_dash\":[4,4],\"line_width\":{\"value\":2},\"plot\":null,\"render_mode\":\"css\",\"right_units\":\"screen\",\"top_units\":\"screen\"},\"id\":\"44d1a1ad-4cb4-4e96-87f9-8d65a38eeb27\",\"type\":\"BoxAnnotation\"},{\"attributes\":{\"callback\":null,\"factors\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"]},\"id\":\"fff9a351-77c9-498e-84a7-e50ebe5a0f0f\",\"type\":\"FactorRange\"},{\"attributes\":{},\"id\":\"939982d3-e948-40c6-b4bb-b1979e396e29\",\"type\":\"ToolEvents\"},{\"attributes\":{},\"id\":\"fecb030c-6289-4816-9f65-28fa30dc35ee\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\",\"TC-No Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"},{\"Measure\":\"TC-No Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[4780326.983532837,2961081.5484270714,3250892.683277692,2908713.1052773213,2886297.2681550593,2655380.8888094123,2397741.0761590325,3774542.9699721793,3992908.1274558906,8866572.088581817,7298504.770889721,13847982.150338387,10852094.102756057,6465145.659603667,3184125.1522181984,2415347.8183391537,5677443.713086305,3410453.6964584305,5620545.313962631]}},\"id\":\"2c11840b-75ac-46aa-ba88-62f1d557222b\",\"type\":\"ColumnDataSource\"},{\"attributes\":{},\"id\":\"8c01d9a7-62f2-4ee1-baec-3c9aabd42a5f\",\"type\":\"CategoricalTickFormatter\"},{\"attributes\":{},\"id\":\"ffba17af-8e0e-4cb4-86f1-f59431d1d5d9\",\"type\":\"CategoricalTicker\"},{\"attributes\":{\"data_source\":{\"id\":\"2c11840b-75ac-46aa-ba88-62f1d557222b\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"c6bc42d1-c86e-4ab4-9536-0012ba68b82c\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"1e66bb35-2d2d-437a-b81c-8f7f21472751\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"overlay\":{\"id\":\"44d1a1ad-4cb4-4e96-87f9-8d65a38eeb27\",\"type\":\"BoxAnnotation\"},\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"f71c1b34-ae41-4f17-99ad-feedd94f05e4\",\"type\":\"BoxZoomTool\"},{\"attributes\":{\"plot\":null,\"text\":\"Total Interest Income by AGI Bin (Thousand of Dollars)\"},\"id\":\"e0dc7086-cf55-40e0-9fa4-2fb8d67dfade\",\"type\":\"Title\"},{\"attributes\":{\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"7cf19b58-02b3-4fe7-88e3-c7cf8f690463\",\"type\":\"WheelZoomTool\"},{\"attributes\":{\"below\":[{\"id\":\"eea0bdda-17e0-41c0-ab45-dfec06dc680d\",\"type\":\"CategoricalAxis\"}],\"left\":[{\"id\":\"df98fea2-2af9-499c-b5eb-144e355b200a\",\"type\":\"LinearAxis\"}],\"renderers\":[{\"id\":\"44d1a1ad-4cb4-4e96-87f9-8d65a38eeb27\",\"type\":\"BoxAnnotation\"},{\"id\":\"22ea6a72-2a53-407a-9876-aa96dc16a580\",\"type\":\"GlyphRenderer\"},{\"id\":\"e05bb746-4c48-4fe3-a12d-cad3f9123503\",\"type\":\"GlyphRenderer\"},{\"id\":\"1e66bb35-2d2d-437a-b81c-8f7f21472751\",\"type\":\"GlyphRenderer\"},{\"id\":\"80f5ed63-7190-4839-a020-759695507218\",\"type\":\"Legend\"},{\"id\":\"eea0bdda-17e0-41c0-ab45-dfec06dc680d\",\"type\":\"CategoricalAxis\"},{\"id\":\"df98fea2-2af9-499c-b5eb-144e355b200a\",\"type\":\"LinearAxis\"},{\"id\":\"512b062f-da36-451b-91cb-3c1b9fc8c900\",\"type\":\"Grid\"},{\"id\":\"f23fb0fc-9096-44a4-9865-198c48f38e6b\",\"type\":\"Grid\"}],\"title\":{\"id\":\"e0dc7086-cf55-40e0-9fa4-2fb8d67dfade\",\"type\":\"Title\"},\"tool_events\":{\"id\":\"939982d3-e948-40c6-b4bb-b1979e396e29\",\"type\":\"ToolEvents\"},\"toolbar\":{\"id\":\"4e5dbff7-c4d7-44ef-a8e5-aa9b5da595aa\",\"type\":\"Toolbar\"},\"x_mapper_type\":\"auto\",\"x_range\":{\"id\":\"fff9a351-77c9-498e-84a7-e50ebe5a0f0f\",\"type\":\"FactorRange\"},\"y_mapper_type\":\"auto\",\"y_range\":{\"id\":\"043bdaf8-fd90-4e26-a4d3-b112497f5ba3\",\"type\":\"Range1d\"}},\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"x_values\",\"y_values\"],\"data\":{\"Measure\":[\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\",\"TC-Adjustment\"],\"chart_index\":[{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"},{\"Measure\":\"TC-Adjustment\"}],\"x_values\":[\"Zero or Negative\",\"$1-$5K\",\"$5K-$10K\",\"$10K-$15K\",\"$15K-$20K\",\"$20K-$25K\",\"$25K-$30K\",\"$30K-$40K\",\"$40K-$50K\",\"$50K-$75K\",\"$75K-$100K\",\"$100K-$200K\",\"$200K-$500K\",\"$500K-$1M\",\"$1M-$1.5M\",\"$1.5M-$2M\",\"$2M-$5M\",\"$5M-$10M\",\"$10M and over\"],\"y_values\":[4014533.4497010447,1330896.59165195,1357579.0434768784,1336609.496158761,1417389.3396116241,1101282.7793287023,1230550.7474439442,1854469.5301803038,1967217.1488544599,4973734.046983778,4753102.675778915,12026954.56742719,12440951.161097538,7451856.246789042,3540136.2120372187,2894049.0604990656,7632044.543218601,4792310.423622259,21130240.945823986]}},\"id\":\"3f43f558-51ed-49e9-9a30-17320c0b364d\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#407ee7\"},\"line_color\":{\"value\":\"#407ee7\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"c6bc42d1-c86e-4ab4-9536-0012ba68b82c\",\"type\":\"Circle\"},{\"attributes\":{\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"0f11943a-e834-4455-8989-7301ba994697\",\"type\":\"HelpTool\"},{\"attributes\":{\"axis_label\":\"AGI Level\",\"formatter\":{\"id\":\"8c01d9a7-62f2-4ee1-baec-3c9aabd42a5f\",\"type\":\"CategoricalTickFormatter\"},\"major_label_orientation\":0.7853981633974483,\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"ffba17af-8e0e-4cb4-86f1-f59431d1d5d9\",\"type\":\"CategoricalTicker\"}},\"id\":\"eea0bdda-17e0-41c0-ab45-dfec06dc680d\",\"type\":\"CategoricalAxis\"},{\"attributes\":{\"dimension\":1,\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"8f90f5af-1b32-4b1b-8bc1-fe3d280fb282\",\"type\":\"BasicTicker\"}},\"id\":\"f23fb0fc-9096-44a4-9865-198c48f38e6b\",\"type\":\"Grid\"},{\"attributes\":{\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"6f5462e3-c692-4ee4-9f61-08d3da3d787c\",\"type\":\"SaveTool\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.7},\"fill_color\":{\"value\":\"#5ab738\"},\"line_color\":{\"value\":\"#5ab738\"},\"size\":{\"units\":\"screen\",\"value\":8},\"x\":{\"field\":\"x_values\"},\"y\":{\"field\":\"y_values\"}},\"id\":\"12d9d984-5f36-499c-bae4-badb29e57329\",\"type\":\"Circle\"},{\"attributes\":{\"label\":{\"value\":\"TC-Adjustment\"},\"renderers\":[{\"id\":\"e05bb746-4c48-4fe3-a12d-cad3f9123503\",\"type\":\"GlyphRenderer\"}]},\"id\":\"7448c5d4-5ff9-4832-9eab-79048b86d317\",\"type\":\"LegendItem\"},{\"attributes\":{\"items\":[{\"id\":\"e904f9f0-11d9-4bbd-8cfe-8928eee55279\",\"type\":\"LegendItem\"},{\"id\":\"7448c5d4-5ff9-4832-9eab-79048b86d317\",\"type\":\"LegendItem\"},{\"id\":\"fb806206-ae62-4cd8-be39-474faa8f3c06\",\"type\":\"LegendItem\"}],\"location\":\"top_left\",\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"80f5ed63-7190-4839-a020-759695507218\",\"type\":\"Legend\"},{\"attributes\":{\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"}},\"id\":\"80de4d1e-07f9-4540-97d9-fc47bf218341\",\"type\":\"PanTool\"},{\"attributes\":{\"plot\":{\"id\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\",\"subtype\":\"Chart\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"ffba17af-8e0e-4cb4-86f1-f59431d1d5d9\",\"type\":\"CategoricalTicker\"}},\"id\":\"512b062f-da36-451b-91cb-3c1b9fc8c900\",\"type\":\"Grid\"},{\"attributes\":{\"callback\":null,\"end\":23189102.840406384,\"start\":-1517239.8945823987},\"id\":\"043bdaf8-fd90-4e26-a4d3-b112497f5ba3\",\"type\":\"Range1d\"},{\"attributes\":{\"data_source\":{\"id\":\"160a34e9-8d1d-40c5-8dcc-9e6b8907e6c9\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"2767aa83-3d1a-40b9-b24e-0d35bc746633\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":null,\"selection_glyph\":null},\"id\":\"22ea6a72-2a53-407a-9876-aa96dc16a580\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"active_drag\":\"auto\",\"active_scroll\":\"auto\",\"active_tap\":\"auto\",\"tools\":[{\"id\":\"80de4d1e-07f9-4540-97d9-fc47bf218341\",\"type\":\"PanTool\"},{\"id\":\"7cf19b58-02b3-4fe7-88e3-c7cf8f690463\",\"type\":\"WheelZoomTool\"},{\"id\":\"f71c1b34-ae41-4f17-99ad-feedd94f05e4\",\"type\":\"BoxZoomTool\"},{\"id\":\"6f5462e3-c692-4ee4-9f61-08d3da3d787c\",\"type\":\"SaveTool\"},{\"id\":\"17e84021-d311-4299-92ed-d7f3f84dd901\",\"type\":\"ResetTool\"},{\"id\":\"0f11943a-e834-4455-8989-7301ba994697\",\"type\":\"HelpTool\"}]},\"id\":\"4e5dbff7-c4d7-44ef-a8e5-aa9b5da595aa\",\"type\":\"Toolbar\"}],\"root_ids\":[\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\"]},\"title\":\"Bokeh Application\",\"version\":\"0.12.3\"}};\n",
       "            var render_items = [{\"docid\":\"c68d1729-d317-4edd-bf13-033a9979829c\",\"elementid\":\"1ae7f352-ca6d-4c13-bcb6-9a3e567feff2\",\"modelid\":\"7c406298-9e46-4bf7-9525-feaf40d2b7d1\"}];\n",
       "            \n",
       "            Bokeh.embed.embed_items(docs_json, render_items);\n",
       "        });\n",
       "      },\n",
       "      function(Bokeh) {\n",
       "      }\n",
       "    ];\n",
       "  \n",
       "    function run_inline_js() {\n",
       "      \n",
       "      if ((window.Bokeh !== undefined) || (force === \"1\")) {\n",
       "        for (var i = 0; i < inline_js.length; i++) {\n",
       "          inline_js[i](window.Bokeh);\n",
       "        }if (force === \"1\") {\n",
       "          display_loaded();\n",
       "        }} else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(run_inline_js, 100);\n",
       "      } else if (!window._bokeh_failed_load) {\n",
       "        console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n",
       "        window._bokeh_failed_load = true;\n",
       "      } else if (!force) {\n",
       "        var cell = $(\"#1ae7f352-ca6d-4c13-bcb6-9a3e567feff2\").parents('.cell').data().cell;\n",
       "        cell.output_area.append_execute_result(NB_LOAD_WARNING)\n",
       "      }\n",
       "  \n",
       "    }\n",
       "  \n",
       "    if (window._bokeh_is_loading === 0) {\n",
       "      console.log(\"Bokeh: BokehJS loaded, going straight to plotting\");\n",
       "      run_inline_js();\n",
       "    } else {\n",
       "      load_libs(js_urls, function() {\n",
       "        console.log(\"Bokeh: BokehJS plotting callback run at\", now());\n",
       "        run_inline_js();\n",
       "      });\n",
       "    }\n",
       "  }(this));\n",
       "</script>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "soi_int = pd.DataFrame()\n",
    "soi_int['Percent of Total Interest Income'] = soi['Interest'] / (soi['Interest'].sum()) * 100\n",
    "soi_int['Measure'] = 'SOI'\n",
    "soi_int['AGI Level'] = index_list\n",
    "tc_int = pd.DataFrame()\n",
    "tc_int['Percent of Total Interest Income'] = tc['Interest'] / (tc['Interest'].sum()) * 100\n",
    "tc_int['Measure'] = 'TC-Adjustment'\n",
    "tc_int['AGI Level'] = index_list\n",
    "tc_none_int = pd.DataFrame()\n",
    "tc_none_int['Percent of Total Interest Income'] = tc_none['Interest'] / (tc_none['Interest'].sum()) * 100\n",
    "tc_none_int['Measure'] = 'TC-No Adjustment'\n",
    "tc_none_int['AGI Level'] = index_list\n",
    "data_int = [soi_int, tc_int, tc_none_int]\n",
    "plot_data_int = pd.concat(data_int)\n",
    "plot_int = Scatter(plot_data_int, x='AGI Level', y='Percent of Total Interest Income', color='Measure',\n",
    "                    title = 'Percent of Total Interest Income by AGI Bin')\n",
    "show(plot_int)\n",
    "\n",
    "soi_int_sum = pd.DataFrame()\n",
    "soi_int_sum['Total Interest Income'] = soi['Interest']\n",
    "soi_int_sum['Measure'] = 'SOI'\n",
    "soi_int_sum['AGI Level'] = index_list\n",
    "tc_int_sum = pd.DataFrame()\n",
    "tc_int_sum['Total Interest Income'] = tc['Interest']\n",
    "tc_int_sum['Measure'] = 'TC-Adjustment'\n",
    "tc_int_sum['AGI Level'] = index_list\n",
    "tc_none_int_sum = pd.DataFrame()\n",
    "tc_none_int_sum['Total Interest Income'] = tc_none['Interest']\n",
    "tc_none_int_sum['Measure'] = 'TC-No Adjustment'\n",
    "tc_none_int_sum['AGI Level'] = index_list\n",
    "data_int_sum = [soi_int_sum, tc_int_sum, tc_none_int_sum]\n",
    "plot_data_int_sum = pd.concat(data_int_sum)\n",
    "plot_int_sum = Scatter(plot_data_int_sum, x='AGI Level', y='Total Interest Income', color='Measure',\n",
    "                    title = 'Total Interest Income by AGI Bin (Thousand of Dollars)')\n",
    "show(plot_int_sum)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Diagnostic Tables"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### With Adjustment"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>2014</th>\n",
       "      <th>2015</th>\n",
       "      <th>2016</th>\n",
       "      <th>2017</th>\n",
       "      <th>2018</th>\n",
       "      <th>2019</th>\n",
       "      <th>2020</th>\n",
       "      <th>2021</th>\n",
       "      <th>2022</th>\n",
       "      <th>2023</th>\n",
       "      <th>2024</th>\n",
       "      <th>2025</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Returns (#m)</th>\n",
       "      <td>162.8</td>\n",
       "      <td>164.9</td>\n",
       "      <td>167.6</td>\n",
       "      <td>170.4</td>\n",
       "      <td>173.2</td>\n",
       "      <td>175.8</td>\n",
       "      <td>177.8</td>\n",
       "      <td>180.1</td>\n",
       "      <td>182.4</td>\n",
       "      <td>184.6</td>\n",
       "      <td>186.8</td>\n",
       "      <td>188.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AGI ($b)</th>\n",
       "      <td>10,017.7</td>\n",
       "      <td>10,542.5</td>\n",
       "      <td>11,020.0</td>\n",
       "      <td>11,441.1</td>\n",
       "      <td>11,871.3</td>\n",
       "      <td>12,276.7</td>\n",
       "      <td>12,716.4</td>\n",
       "      <td>13,216.8</td>\n",
       "      <td>13,760.6</td>\n",
       "      <td>14,340.2</td>\n",
       "      <td>14,948.7</td>\n",
       "      <td>15,588.6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Itemizers (#m)</th>\n",
       "      <td>41.9</td>\n",
       "      <td>42.7</td>\n",
       "      <td>44.0</td>\n",
       "      <td>44.8</td>\n",
       "      <td>45.6</td>\n",
       "      <td>46.2</td>\n",
       "      <td>46.9</td>\n",
       "      <td>47.5</td>\n",
       "      <td>48.0</td>\n",
       "      <td>48.6</td>\n",
       "      <td>49.2</td>\n",
       "      <td>49.8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Itemized Deduction ($b)</th>\n",
       "      <td>1,103.9</td>\n",
       "      <td>1,157.7</td>\n",
       "      <td>1,217.7</td>\n",
       "      <td>1,270.2</td>\n",
       "      <td>1,331.3</td>\n",
       "      <td>1,392.7</td>\n",
       "      <td>1,459.0</td>\n",
       "      <td>1,527.9</td>\n",
       "      <td>1,600.7</td>\n",
       "      <td>1,677.8</td>\n",
       "      <td>1,755.9</td>\n",
       "      <td>1,837.6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Standard Deduction Filers (#m)</th>\n",
       "      <td>108.0</td>\n",
       "      <td>109.1</td>\n",
       "      <td>110.2</td>\n",
       "      <td>111.9</td>\n",
       "      <td>113.5</td>\n",
       "      <td>115.1</td>\n",
       "      <td>116.2</td>\n",
       "      <td>117.6</td>\n",
       "      <td>119.1</td>\n",
       "      <td>120.3</td>\n",
       "      <td>121.6</td>\n",
       "      <td>122.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Standard Deduction ($b)</th>\n",
       "      <td>937.4</td>\n",
       "      <td>963.1</td>\n",
       "      <td>973.8</td>\n",
       "      <td>996.0</td>\n",
       "      <td>1,033.8</td>\n",
       "      <td>1,072.4</td>\n",
       "      <td>1,109.5</td>\n",
       "      <td>1,149.9</td>\n",
       "      <td>1,191.6</td>\n",
       "      <td>1,233.2</td>\n",
       "      <td>1,276.9</td>\n",
       "      <td>1,322.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Personal Exemption ($b)</th>\n",
       "      <td>1,116.3</td>\n",
       "      <td>1,139.0</td>\n",
       "      <td>1,164.0</td>\n",
       "      <td>1,175.7</td>\n",
       "      <td>1,214.4</td>\n",
       "      <td>1,254.3</td>\n",
       "      <td>1,295.0</td>\n",
       "      <td>1,336.5</td>\n",
       "      <td>1,378.9</td>\n",
       "      <td>1,423.2</td>\n",
       "      <td>1,468.2</td>\n",
       "      <td>1,514.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Taxable Income ($b)</th>\n",
       "      <td>7,336.9</td>\n",
       "      <td>7,765.6</td>\n",
       "      <td>8,153.5</td>\n",
       "      <td>8,491.6</td>\n",
       "      <td>8,800.6</td>\n",
       "      <td>9,083.3</td>\n",
       "      <td>9,387.0</td>\n",
       "      <td>9,754.7</td>\n",
       "      <td>10,163.8</td>\n",
       "      <td>10,597.5</td>\n",
       "      <td>11,059.9</td>\n",
       "      <td>11,548.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Regular Tax ($b)</th>\n",
       "      <td>1,673.9</td>\n",
       "      <td>1,788.3</td>\n",
       "      <td>1,883.5</td>\n",
       "      <td>1,956.4</td>\n",
       "      <td>2,017.5</td>\n",
       "      <td>2,073.2</td>\n",
       "      <td>2,135.4</td>\n",
       "      <td>2,216.7</td>\n",
       "      <td>2,310.6</td>\n",
       "      <td>2,409.9</td>\n",
       "      <td>2,517.2</td>\n",
       "      <td>2,631.4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Income ($b)</th>\n",
       "      <td>9,482.5</td>\n",
       "      <td>9,979.2</td>\n",
       "      <td>10,425.1</td>\n",
       "      <td>10,820.8</td>\n",
       "      <td>11,220.5</td>\n",
       "      <td>11,595.1</td>\n",
       "      <td>11,999.5</td>\n",
       "      <td>12,465.8</td>\n",
       "      <td>12,973.8</td>\n",
       "      <td>13,512.7</td>\n",
       "      <td>14,081.6</td>\n",
       "      <td>14,678.7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Liability ($b)</th>\n",
       "      <td>38.6</td>\n",
       "      <td>40.4</td>\n",
       "      <td>42.7</td>\n",
       "      <td>44.9</td>\n",
       "      <td>47.2</td>\n",
       "      <td>49.6</td>\n",
       "      <td>51.5</td>\n",
       "      <td>54.3</td>\n",
       "      <td>57.6</td>\n",
       "      <td>60.2</td>\n",
       "      <td>63.2</td>\n",
       "      <td>66.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Filers (#m)</th>\n",
       "      <td>4.8</td>\n",
       "      <td>5.0</td>\n",
       "      <td>5.3</td>\n",
       "      <td>5.6</td>\n",
       "      <td>5.7</td>\n",
       "      <td>5.8</td>\n",
       "      <td>5.9</td>\n",
       "      <td>6.0</td>\n",
       "      <td>6.2</td>\n",
       "      <td>6.4</td>\n",
       "      <td>6.5</td>\n",
       "      <td>6.7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tax before Credits ($b)</th>\n",
       "      <td>1,571.8</td>\n",
       "      <td>1,664.2</td>\n",
       "      <td>1,748.4</td>\n",
       "      <td>1,821.8</td>\n",
       "      <td>1,883.8</td>\n",
       "      <td>1,941.5</td>\n",
       "      <td>2,002.4</td>\n",
       "      <td>2,081.4</td>\n",
       "      <td>2,172.3</td>\n",
       "      <td>2,267.8</td>\n",
       "      <td>2,370.5</td>\n",
       "      <td>2,479.3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Refundable Credits ($b)</th>\n",
       "      <td>97.6</td>\n",
       "      <td>97.7</td>\n",
       "      <td>96.8</td>\n",
       "      <td>96.5</td>\n",
       "      <td>98.3</td>\n",
       "      <td>100.4</td>\n",
       "      <td>102.1</td>\n",
       "      <td>104.1</td>\n",
       "      <td>105.8</td>\n",
       "      <td>107.7</td>\n",
       "      <td>109.5</td>\n",
       "      <td>111.3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Nonrefundable Credits ($b)</th>\n",
       "      <td>73.4</td>\n",
       "      <td>73.7</td>\n",
       "      <td>73.8</td>\n",
       "      <td>74.6</td>\n",
       "      <td>75.1</td>\n",
       "      <td>75.5</td>\n",
       "      <td>76.0</td>\n",
       "      <td>76.7</td>\n",
       "      <td>77.8</td>\n",
       "      <td>79.2</td>\n",
       "      <td>80.8</td>\n",
       "      <td>82.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Reform Surtaxes ($b)</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ind Income Tax ($b)</th>\n",
       "      <td>1,440.0</td>\n",
       "      <td>1,537.4</td>\n",
       "      <td>1,625.8</td>\n",
       "      <td>1,699.5</td>\n",
       "      <td>1,759.9</td>\n",
       "      <td>1,815.7</td>\n",
       "      <td>1,875.6</td>\n",
       "      <td>1,953.9</td>\n",
       "      <td>2,044.2</td>\n",
       "      <td>2,138.6</td>\n",
       "      <td>2,240.4</td>\n",
       "      <td>2,348.4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Payroll Taxes ($b)</th>\n",
       "      <td>958.3</td>\n",
       "      <td>999.5</td>\n",
       "      <td>1,039.7</td>\n",
       "      <td>1,093.5</td>\n",
       "      <td>1,139.2</td>\n",
       "      <td>1,181.1</td>\n",
       "      <td>1,224.9</td>\n",
       "      <td>1,271.6</td>\n",
       "      <td>1,321.1</td>\n",
       "      <td>1,374.0</td>\n",
       "      <td>1,428.9</td>\n",
       "      <td>1,485.8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Combined Liability ($b)</th>\n",
       "      <td>2,398.2</td>\n",
       "      <td>2,536.9</td>\n",
       "      <td>2,665.4</td>\n",
       "      <td>2,793.0</td>\n",
       "      <td>2,899.1</td>\n",
       "      <td>2,996.8</td>\n",
       "      <td>3,100.5</td>\n",
       "      <td>3,225.4</td>\n",
       "      <td>3,365.3</td>\n",
       "      <td>3,512.7</td>\n",
       "      <td>3,669.3</td>\n",
       "      <td>3,834.2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>With Income Tax &lt;= 0 (#m)</th>\n",
       "      <td>70.8</td>\n",
       "      <td>70.9</td>\n",
       "      <td>71.1</td>\n",
       "      <td>71.3</td>\n",
       "      <td>72.1</td>\n",
       "      <td>73.2</td>\n",
       "      <td>73.7</td>\n",
       "      <td>74.4</td>\n",
       "      <td>75.2</td>\n",
       "      <td>75.5</td>\n",
       "      <td>76.0</td>\n",
       "      <td>76.4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>With Combined Tax &lt;= 0 (#m)</th>\n",
       "      <td>40.7</td>\n",
       "      <td>41.1</td>\n",
       "      <td>41.4</td>\n",
       "      <td>41.7</td>\n",
       "      <td>42.5</td>\n",
       "      <td>43.4</td>\n",
       "      <td>43.7</td>\n",
       "      <td>44.3</td>\n",
       "      <td>45.0</td>\n",
       "      <td>45.3</td>\n",
       "      <td>45.8</td>\n",
       "      <td>46.2</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                   2014     2015     2016     2017     2018  \\\n",
       "Returns (#m)                      162.8    164.9    167.6    170.4    173.2   \n",
       "AGI ($b)                       10,017.7 10,542.5 11,020.0 11,441.1 11,871.3   \n",
       "Itemizers (#m)                     41.9     42.7     44.0     44.8     45.6   \n",
       "Itemized Deduction ($b)         1,103.9  1,157.7  1,217.7  1,270.2  1,331.3   \n",
       "Standard Deduction Filers (#m)    108.0    109.1    110.2    111.9    113.5   \n",
       "Standard Deduction ($b)           937.4    963.1    973.8    996.0  1,033.8   \n",
       "Personal Exemption ($b)         1,116.3  1,139.0  1,164.0  1,175.7  1,214.4   \n",
       "Taxable Income ($b)             7,336.9  7,765.6  8,153.5  8,491.6  8,800.6   \n",
       "Regular Tax ($b)                1,673.9  1,788.3  1,883.5  1,956.4  2,017.5   \n",
       "AMT Income ($b)                 9,482.5  9,979.2 10,425.1 10,820.8 11,220.5   \n",
       "AMT Liability ($b)                 38.6     40.4     42.7     44.9     47.2   \n",
       "AMT Filers (#m)                     4.8      5.0      5.3      5.6      5.7   \n",
       "Tax before Credits ($b)         1,571.8  1,664.2  1,748.4  1,821.8  1,883.8   \n",
       "Refundable Credits ($b)            97.6     97.7     96.8     96.5     98.3   \n",
       "Nonrefundable Credits ($b)         73.4     73.7     73.8     74.6     75.1   \n",
       "Reform Surtaxes ($b)                0.0      0.0      0.0      0.0      0.0   \n",
       "Ind Income Tax ($b)             1,440.0  1,537.4  1,625.8  1,699.5  1,759.9   \n",
       "Payroll Taxes ($b)                958.3    999.5  1,039.7  1,093.5  1,139.2   \n",
       "Combined Liability ($b)         2,398.2  2,536.9  2,665.4  2,793.0  2,899.1   \n",
       "With Income Tax <= 0 (#m)          70.8     70.9     71.1     71.3     72.1   \n",
       "With Combined Tax <= 0 (#m)        40.7     41.1     41.4     41.7     42.5   \n",
       "\n",
       "                                   2019     2020     2021     2022     2023  \\\n",
       "Returns (#m)                      175.8    177.8    180.1    182.4    184.6   \n",
       "AGI ($b)                       12,276.7 12,716.4 13,216.8 13,760.6 14,340.2   \n",
       "Itemizers (#m)                     46.2     46.9     47.5     48.0     48.6   \n",
       "Itemized Deduction ($b)         1,392.7  1,459.0  1,527.9  1,600.7  1,677.8   \n",
       "Standard Deduction Filers (#m)    115.1    116.2    117.6    119.1    120.3   \n",
       "Standard Deduction ($b)         1,072.4  1,109.5  1,149.9  1,191.6  1,233.2   \n",
       "Personal Exemption ($b)         1,254.3  1,295.0  1,336.5  1,378.9  1,423.2   \n",
       "Taxable Income ($b)             9,083.3  9,387.0  9,754.7 10,163.8 10,597.5   \n",
       "Regular Tax ($b)                2,073.2  2,135.4  2,216.7  2,310.6  2,409.9   \n",
       "AMT Income ($b)                11,595.1 11,999.5 12,465.8 12,973.8 13,512.7   \n",
       "AMT Liability ($b)                 49.6     51.5     54.3     57.6     60.2   \n",
       "AMT Filers (#m)                     5.8      5.9      6.0      6.2      6.4   \n",
       "Tax before Credits ($b)         1,941.5  2,002.4  2,081.4  2,172.3  2,267.8   \n",
       "Refundable Credits ($b)           100.4    102.1    104.1    105.8    107.7   \n",
       "Nonrefundable Credits ($b)         75.5     76.0     76.7     77.8     79.2   \n",
       "Reform Surtaxes ($b)                0.0      0.0      0.0      0.0      0.0   \n",
       "Ind Income Tax ($b)             1,815.7  1,875.6  1,953.9  2,044.2  2,138.6   \n",
       "Payroll Taxes ($b)              1,181.1  1,224.9  1,271.6  1,321.1  1,374.0   \n",
       "Combined Liability ($b)         2,996.8  3,100.5  3,225.4  3,365.3  3,512.7   \n",
       "With Income Tax <= 0 (#m)          73.2     73.7     74.4     75.2     75.5   \n",
       "With Combined Tax <= 0 (#m)        43.4     43.7     44.3     45.0     45.3   \n",
       "\n",
       "                                   2024     2025  \n",
       "Returns (#m)                      186.8    188.9  \n",
       "AGI ($b)                       14,948.7 15,588.6  \n",
       "Itemizers (#m)                     49.2     49.8  \n",
       "Itemized Deduction ($b)         1,755.9  1,837.6  \n",
       "Standard Deduction Filers (#m)    121.6    122.9  \n",
       "Standard Deduction ($b)         1,276.9  1,322.1  \n",
       "Personal Exemption ($b)         1,468.2  1,514.9  \n",
       "Taxable Income ($b)            11,059.9 11,548.1  \n",
       "Regular Tax ($b)                2,517.2  2,631.4  \n",
       "AMT Income ($b)                14,081.6 14,678.7  \n",
       "AMT Liability ($b)                 63.2     66.1  \n",
       "AMT Filers (#m)                     6.5      6.7  \n",
       "Tax before Credits ($b)         2,370.5  2,479.3  \n",
       "Refundable Credits ($b)           109.5    111.3  \n",
       "Nonrefundable Credits ($b)         80.8     82.5  \n",
       "Reform Surtaxes ($b)                0.0      0.0  \n",
       "Ind Income Tax ($b)             2,240.4  2,348.4  \n",
       "Payroll Taxes ($b)              1,428.9  1,485.8  \n",
       "Combined Liability ($b)         3,669.3  3,834.2  \n",
       "With Income Tax <= 0 (#m)          76.0     76.4  \n",
       "With Combined Tax <= 0 (#m)        45.8     46.2  "
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "diag_adj = utils.multiyear_diagnostic_table(calc, 12)\n",
    "diag_adj"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Without Adustment"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>2014</th>\n",
       "      <th>2015</th>\n",
       "      <th>2016</th>\n",
       "      <th>2017</th>\n",
       "      <th>2018</th>\n",
       "      <th>2019</th>\n",
       "      <th>2020</th>\n",
       "      <th>2021</th>\n",
       "      <th>2022</th>\n",
       "      <th>2023</th>\n",
       "      <th>2024</th>\n",
       "      <th>2025</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Returns (#m)</th>\n",
       "      <td>162.8</td>\n",
       "      <td>164.9</td>\n",
       "      <td>167.6</td>\n",
       "      <td>170.4</td>\n",
       "      <td>173.2</td>\n",
       "      <td>175.8</td>\n",
       "      <td>177.8</td>\n",
       "      <td>180.1</td>\n",
       "      <td>182.4</td>\n",
       "      <td>184.6</td>\n",
       "      <td>186.8</td>\n",
       "      <td>188.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AGI ($b)</th>\n",
       "      <td>10,021.6</td>\n",
       "      <td>10,546.4</td>\n",
       "      <td>11,024.2</td>\n",
       "      <td>11,445.6</td>\n",
       "      <td>11,876.3</td>\n",
       "      <td>12,282.3</td>\n",
       "      <td>12,722.7</td>\n",
       "      <td>13,224.0</td>\n",
       "      <td>13,768.7</td>\n",
       "      <td>14,349.3</td>\n",
       "      <td>14,958.9</td>\n",
       "      <td>15,599.7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Itemizers (#m)</th>\n",
       "      <td>42.1</td>\n",
       "      <td>42.9</td>\n",
       "      <td>44.1</td>\n",
       "      <td>45.0</td>\n",
       "      <td>45.7</td>\n",
       "      <td>46.3</td>\n",
       "      <td>47.1</td>\n",
       "      <td>47.7</td>\n",
       "      <td>48.2</td>\n",
       "      <td>48.8</td>\n",
       "      <td>49.4</td>\n",
       "      <td>50.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Itemized Deduction ($b)</th>\n",
       "      <td>1,107.8</td>\n",
       "      <td>1,161.8</td>\n",
       "      <td>1,221.6</td>\n",
       "      <td>1,274.6</td>\n",
       "      <td>1,336.1</td>\n",
       "      <td>1,397.7</td>\n",
       "      <td>1,464.4</td>\n",
       "      <td>1,533.9</td>\n",
       "      <td>1,607.0</td>\n",
       "      <td>1,683.1</td>\n",
       "      <td>1,761.8</td>\n",
       "      <td>1,843.2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Standard Deduction Filers (#m)</th>\n",
       "      <td>108.0</td>\n",
       "      <td>109.0</td>\n",
       "      <td>110.2</td>\n",
       "      <td>111.8</td>\n",
       "      <td>113.5</td>\n",
       "      <td>115.0</td>\n",
       "      <td>116.2</td>\n",
       "      <td>117.5</td>\n",
       "      <td>119.0</td>\n",
       "      <td>120.2</td>\n",
       "      <td>121.5</td>\n",
       "      <td>122.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Standard Deduction ($b)</th>\n",
       "      <td>936.9</td>\n",
       "      <td>962.3</td>\n",
       "      <td>973.2</td>\n",
       "      <td>995.5</td>\n",
       "      <td>1,033.2</td>\n",
       "      <td>1,071.8</td>\n",
       "      <td>1,109.0</td>\n",
       "      <td>1,149.1</td>\n",
       "      <td>1,190.7</td>\n",
       "      <td>1,232.5</td>\n",
       "      <td>1,276.2</td>\n",
       "      <td>1,321.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Personal Exemption ($b)</th>\n",
       "      <td>1,116.6</td>\n",
       "      <td>1,139.4</td>\n",
       "      <td>1,164.6</td>\n",
       "      <td>1,176.3</td>\n",
       "      <td>1,215.0</td>\n",
       "      <td>1,254.9</td>\n",
       "      <td>1,295.7</td>\n",
       "      <td>1,337.2</td>\n",
       "      <td>1,379.7</td>\n",
       "      <td>1,424.0</td>\n",
       "      <td>1,469.1</td>\n",
       "      <td>1,515.8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Taxable Income ($b)</th>\n",
       "      <td>7,331.0</td>\n",
       "      <td>7,759.9</td>\n",
       "      <td>8,147.5</td>\n",
       "      <td>8,485.4</td>\n",
       "      <td>8,794.2</td>\n",
       "      <td>9,076.6</td>\n",
       "      <td>9,380.1</td>\n",
       "      <td>9,747.2</td>\n",
       "      <td>10,155.9</td>\n",
       "      <td>10,589.7</td>\n",
       "      <td>11,052.0</td>\n",
       "      <td>11,539.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Regular Tax ($b)</th>\n",
       "      <td>1,667.9</td>\n",
       "      <td>1,782.3</td>\n",
       "      <td>1,877.3</td>\n",
       "      <td>1,949.8</td>\n",
       "      <td>2,010.4</td>\n",
       "      <td>2,065.5</td>\n",
       "      <td>2,127.2</td>\n",
       "      <td>2,207.6</td>\n",
       "      <td>2,300.6</td>\n",
       "      <td>2,399.3</td>\n",
       "      <td>2,505.9</td>\n",
       "      <td>2,619.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Income ($b)</th>\n",
       "      <td>9,484.4</td>\n",
       "      <td>9,980.9</td>\n",
       "      <td>10,427.3</td>\n",
       "      <td>10,822.8</td>\n",
       "      <td>11,223.2</td>\n",
       "      <td>11,598.4</td>\n",
       "      <td>12,002.9</td>\n",
       "      <td>12,469.7</td>\n",
       "      <td>12,978.9</td>\n",
       "      <td>13,519.7</td>\n",
       "      <td>14,089.2</td>\n",
       "      <td>14,687.8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Liability ($b)</th>\n",
       "      <td>38.8</td>\n",
       "      <td>40.5</td>\n",
       "      <td>42.8</td>\n",
       "      <td>45.0</td>\n",
       "      <td>47.3</td>\n",
       "      <td>49.8</td>\n",
       "      <td>51.6</td>\n",
       "      <td>54.5</td>\n",
       "      <td>57.9</td>\n",
       "      <td>60.5</td>\n",
       "      <td>63.5</td>\n",
       "      <td>66.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Filers (#m)</th>\n",
       "      <td>4.8</td>\n",
       "      <td>5.0</td>\n",
       "      <td>5.3</td>\n",
       "      <td>5.6</td>\n",
       "      <td>5.7</td>\n",
       "      <td>5.8</td>\n",
       "      <td>5.9</td>\n",
       "      <td>6.1</td>\n",
       "      <td>6.2</td>\n",
       "      <td>6.4</td>\n",
       "      <td>6.5</td>\n",
       "      <td>6.7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tax before Credits ($b)</th>\n",
       "      <td>1,566.0</td>\n",
       "      <td>1,658.4</td>\n",
       "      <td>1,742.4</td>\n",
       "      <td>1,815.4</td>\n",
       "      <td>1,876.9</td>\n",
       "      <td>1,934.1</td>\n",
       "      <td>1,994.4</td>\n",
       "      <td>2,072.6</td>\n",
       "      <td>2,162.8</td>\n",
       "      <td>2,257.6</td>\n",
       "      <td>2,359.6</td>\n",
       "      <td>2,467.8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Refundable Credits ($b)</th>\n",
       "      <td>97.6</td>\n",
       "      <td>97.7</td>\n",
       "      <td>96.8</td>\n",
       "      <td>96.4</td>\n",
       "      <td>98.2</td>\n",
       "      <td>100.3</td>\n",
       "      <td>102.1</td>\n",
       "      <td>104.0</td>\n",
       "      <td>105.8</td>\n",
       "      <td>107.7</td>\n",
       "      <td>109.4</td>\n",
       "      <td>111.3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Nonrefundable Credits ($b)</th>\n",
       "      <td>73.4</td>\n",
       "      <td>73.7</td>\n",
       "      <td>73.9</td>\n",
       "      <td>74.7</td>\n",
       "      <td>75.1</td>\n",
       "      <td>75.5</td>\n",
       "      <td>76.1</td>\n",
       "      <td>76.7</td>\n",
       "      <td>77.8</td>\n",
       "      <td>79.2</td>\n",
       "      <td>80.8</td>\n",
       "      <td>82.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Reform Surtaxes ($b)</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ind Income Tax ($b)</th>\n",
       "      <td>1,433.3</td>\n",
       "      <td>1,530.8</td>\n",
       "      <td>1,618.8</td>\n",
       "      <td>1,692.2</td>\n",
       "      <td>1,752.1</td>\n",
       "      <td>1,807.2</td>\n",
       "      <td>1,866.5</td>\n",
       "      <td>1,943.7</td>\n",
       "      <td>2,033.2</td>\n",
       "      <td>2,126.9</td>\n",
       "      <td>2,228.0</td>\n",
       "      <td>2,335.3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Payroll Taxes ($b)</th>\n",
       "      <td>958.3</td>\n",
       "      <td>999.5</td>\n",
       "      <td>1,039.7</td>\n",
       "      <td>1,093.5</td>\n",
       "      <td>1,139.2</td>\n",
       "      <td>1,181.1</td>\n",
       "      <td>1,224.9</td>\n",
       "      <td>1,271.6</td>\n",
       "      <td>1,321.1</td>\n",
       "      <td>1,374.0</td>\n",
       "      <td>1,428.9</td>\n",
       "      <td>1,485.8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Combined Liability ($b)</th>\n",
       "      <td>2,391.6</td>\n",
       "      <td>2,530.4</td>\n",
       "      <td>2,658.5</td>\n",
       "      <td>2,785.7</td>\n",
       "      <td>2,891.2</td>\n",
       "      <td>2,988.3</td>\n",
       "      <td>3,091.4</td>\n",
       "      <td>3,215.3</td>\n",
       "      <td>3,354.3</td>\n",
       "      <td>3,500.9</td>\n",
       "      <td>3,656.9</td>\n",
       "      <td>3,821.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>With Income Tax &lt;= 0 (#m)</th>\n",
       "      <td>70.2</td>\n",
       "      <td>70.4</td>\n",
       "      <td>70.5</td>\n",
       "      <td>70.6</td>\n",
       "      <td>71.5</td>\n",
       "      <td>72.5</td>\n",
       "      <td>72.9</td>\n",
       "      <td>73.6</td>\n",
       "      <td>74.3</td>\n",
       "      <td>74.6</td>\n",
       "      <td>75.0</td>\n",
       "      <td>75.4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>With Combined Tax &lt;= 0 (#m)</th>\n",
       "      <td>40.4</td>\n",
       "      <td>40.7</td>\n",
       "      <td>41.0</td>\n",
       "      <td>41.3</td>\n",
       "      <td>42.1</td>\n",
       "      <td>42.9</td>\n",
       "      <td>43.2</td>\n",
       "      <td>43.8</td>\n",
       "      <td>44.4</td>\n",
       "      <td>44.7</td>\n",
       "      <td>45.1</td>\n",
       "      <td>45.5</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                   2014     2015     2016     2017     2018  \\\n",
       "Returns (#m)                      162.8    164.9    167.6    170.4    173.2   \n",
       "AGI ($b)                       10,021.6 10,546.4 11,024.2 11,445.6 11,876.3   \n",
       "Itemizers (#m)                     42.1     42.9     44.1     45.0     45.7   \n",
       "Itemized Deduction ($b)         1,107.8  1,161.8  1,221.6  1,274.6  1,336.1   \n",
       "Standard Deduction Filers (#m)    108.0    109.0    110.2    111.8    113.5   \n",
       "Standard Deduction ($b)           936.9    962.3    973.2    995.5  1,033.2   \n",
       "Personal Exemption ($b)         1,116.6  1,139.4  1,164.6  1,176.3  1,215.0   \n",
       "Taxable Income ($b)             7,331.0  7,759.9  8,147.5  8,485.4  8,794.2   \n",
       "Regular Tax ($b)                1,667.9  1,782.3  1,877.3  1,949.8  2,010.4   \n",
       "AMT Income ($b)                 9,484.4  9,980.9 10,427.3 10,822.8 11,223.2   \n",
       "AMT Liability ($b)                 38.8     40.5     42.8     45.0     47.3   \n",
       "AMT Filers (#m)                     4.8      5.0      5.3      5.6      5.7   \n",
       "Tax before Credits ($b)         1,566.0  1,658.4  1,742.4  1,815.4  1,876.9   \n",
       "Refundable Credits ($b)            97.6     97.7     96.8     96.4     98.2   \n",
       "Nonrefundable Credits ($b)         73.4     73.7     73.9     74.7     75.1   \n",
       "Reform Surtaxes ($b)                0.0      0.0      0.0      0.0      0.0   \n",
       "Ind Income Tax ($b)             1,433.3  1,530.8  1,618.8  1,692.2  1,752.1   \n",
       "Payroll Taxes ($b)                958.3    999.5  1,039.7  1,093.5  1,139.2   \n",
       "Combined Liability ($b)         2,391.6  2,530.4  2,658.5  2,785.7  2,891.2   \n",
       "With Income Tax <= 0 (#m)          70.2     70.4     70.5     70.6     71.5   \n",
       "With Combined Tax <= 0 (#m)        40.4     40.7     41.0     41.3     42.1   \n",
       "\n",
       "                                   2019     2020     2021     2022     2023  \\\n",
       "Returns (#m)                      175.8    177.8    180.1    182.4    184.6   \n",
       "AGI ($b)                       12,282.3 12,722.7 13,224.0 13,768.7 14,349.3   \n",
       "Itemizers (#m)                     46.3     47.1     47.7     48.2     48.8   \n",
       "Itemized Deduction ($b)         1,397.7  1,464.4  1,533.9  1,607.0  1,683.1   \n",
       "Standard Deduction Filers (#m)    115.0    116.2    117.5    119.0    120.2   \n",
       "Standard Deduction ($b)         1,071.8  1,109.0  1,149.1  1,190.7  1,232.5   \n",
       "Personal Exemption ($b)         1,254.9  1,295.7  1,337.2  1,379.7  1,424.0   \n",
       "Taxable Income ($b)             9,076.6  9,380.1  9,747.2 10,155.9 10,589.7   \n",
       "Regular Tax ($b)                2,065.5  2,127.2  2,207.6  2,300.6  2,399.3   \n",
       "AMT Income ($b)                11,598.4 12,002.9 12,469.7 12,978.9 13,519.7   \n",
       "AMT Liability ($b)                 49.8     51.6     54.5     57.9     60.5   \n",
       "AMT Filers (#m)                     5.8      5.9      6.1      6.2      6.4   \n",
       "Tax before Credits ($b)         1,934.1  1,994.4  2,072.6  2,162.8  2,257.6   \n",
       "Refundable Credits ($b)           100.3    102.1    104.0    105.8    107.7   \n",
       "Nonrefundable Credits ($b)         75.5     76.1     76.7     77.8     79.2   \n",
       "Reform Surtaxes ($b)                0.0      0.0      0.0      0.0      0.0   \n",
       "Ind Income Tax ($b)             1,807.2  1,866.5  1,943.7  2,033.2  2,126.9   \n",
       "Payroll Taxes ($b)              1,181.1  1,224.9  1,271.6  1,321.1  1,374.0   \n",
       "Combined Liability ($b)         2,988.3  3,091.4  3,215.3  3,354.3  3,500.9   \n",
       "With Income Tax <= 0 (#m)          72.5     72.9     73.6     74.3     74.6   \n",
       "With Combined Tax <= 0 (#m)        42.9     43.2     43.8     44.4     44.7   \n",
       "\n",
       "                                   2024     2025  \n",
       "Returns (#m)                      186.8    188.9  \n",
       "AGI ($b)                       14,958.9 15,599.7  \n",
       "Itemizers (#m)                     49.4     50.0  \n",
       "Itemized Deduction ($b)         1,761.8  1,843.2  \n",
       "Standard Deduction Filers (#m)    121.5    122.9  \n",
       "Standard Deduction ($b)         1,276.2  1,321.5  \n",
       "Personal Exemption ($b)         1,469.1  1,515.8  \n",
       "Taxable Income ($b)            11,052.0 11,539.9  \n",
       "Regular Tax ($b)                2,505.9  2,619.5  \n",
       "AMT Income ($b)                14,089.2 14,687.8  \n",
       "AMT Liability ($b)                 63.5     66.5  \n",
       "AMT Filers (#m)                     6.5      6.7  \n",
       "Tax before Credits ($b)         2,359.6  2,467.8  \n",
       "Refundable Credits ($b)           109.4    111.3  \n",
       "Nonrefundable Credits ($b)         80.8     82.5  \n",
       "Reform Surtaxes ($b)                0.0      0.0  \n",
       "Ind Income Tax ($b)             2,228.0  2,335.3  \n",
       "Payroll Taxes ($b)              1,428.9  1,485.8  \n",
       "Combined Liability ($b)         3,656.9  3,821.1  \n",
       "With Income Tax <= 0 (#m)          75.0     75.4  \n",
       "With Combined Tax <= 0 (#m)        45.1     45.5  "
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "diag_none = utils.multiyear_diagnostic_table(calc_none, 12)\n",
    "diag_none"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Difference"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>2014</th>\n",
       "      <th>2015</th>\n",
       "      <th>2016</th>\n",
       "      <th>2017</th>\n",
       "      <th>2018</th>\n",
       "      <th>2019</th>\n",
       "      <th>2020</th>\n",
       "      <th>2021</th>\n",
       "      <th>2022</th>\n",
       "      <th>2023</th>\n",
       "      <th>2024</th>\n",
       "      <th>2025</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Returns (#m)</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AGI ($b)</th>\n",
       "      <td>-3.9</td>\n",
       "      <td>-3.9</td>\n",
       "      <td>-4.1</td>\n",
       "      <td>-4.5</td>\n",
       "      <td>-5.0</td>\n",
       "      <td>-5.6</td>\n",
       "      <td>-6.3</td>\n",
       "      <td>-7.2</td>\n",
       "      <td>-8.2</td>\n",
       "      <td>-9.1</td>\n",
       "      <td>-10.1</td>\n",
       "      <td>-11.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Itemizers (#m)</th>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Itemized Deduction ($b)</th>\n",
       "      <td>-3.9</td>\n",
       "      <td>-4.1</td>\n",
       "      <td>-3.9</td>\n",
       "      <td>-4.4</td>\n",
       "      <td>-4.9</td>\n",
       "      <td>-5.1</td>\n",
       "      <td>-5.3</td>\n",
       "      <td>-6.0</td>\n",
       "      <td>-6.3</td>\n",
       "      <td>-5.3</td>\n",
       "      <td>-5.9</td>\n",
       "      <td>-5.7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Standard Deduction Filers (#m)</th>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Standard Deduction ($b)</th>\n",
       "      <td>0.6</td>\n",
       "      <td>0.7</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.5</td>\n",
       "      <td>0.7</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.8</td>\n",
       "      <td>0.9</td>\n",
       "      <td>0.7</td>\n",
       "      <td>0.7</td>\n",
       "      <td>0.6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Personal Exemption ($b)</th>\n",
       "      <td>-0.4</td>\n",
       "      <td>-0.5</td>\n",
       "      <td>-0.6</td>\n",
       "      <td>-0.6</td>\n",
       "      <td>-0.6</td>\n",
       "      <td>-0.6</td>\n",
       "      <td>-0.7</td>\n",
       "      <td>-0.7</td>\n",
       "      <td>-0.8</td>\n",
       "      <td>-0.8</td>\n",
       "      <td>-0.9</td>\n",
       "      <td>-0.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Taxable Income ($b)</th>\n",
       "      <td>5.9</td>\n",
       "      <td>5.8</td>\n",
       "      <td>6.0</td>\n",
       "      <td>6.2</td>\n",
       "      <td>6.4</td>\n",
       "      <td>6.7</td>\n",
       "      <td>6.9</td>\n",
       "      <td>7.5</td>\n",
       "      <td>7.9</td>\n",
       "      <td>7.8</td>\n",
       "      <td>7.9</td>\n",
       "      <td>8.2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Regular Tax ($b)</th>\n",
       "      <td>6.0</td>\n",
       "      <td>5.9</td>\n",
       "      <td>6.2</td>\n",
       "      <td>6.6</td>\n",
       "      <td>7.1</td>\n",
       "      <td>7.7</td>\n",
       "      <td>8.2</td>\n",
       "      <td>9.1</td>\n",
       "      <td>9.9</td>\n",
       "      <td>10.6</td>\n",
       "      <td>11.2</td>\n",
       "      <td>11.9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Income ($b)</th>\n",
       "      <td>-1.9</td>\n",
       "      <td>-1.7</td>\n",
       "      <td>-2.2</td>\n",
       "      <td>-2.0</td>\n",
       "      <td>-2.7</td>\n",
       "      <td>-3.2</td>\n",
       "      <td>-3.4</td>\n",
       "      <td>-3.9</td>\n",
       "      <td>-5.2</td>\n",
       "      <td>-7.0</td>\n",
       "      <td>-7.6</td>\n",
       "      <td>-9.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Liability ($b)</th>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.2</td>\n",
       "      <td>-0.3</td>\n",
       "      <td>-0.3</td>\n",
       "      <td>-0.3</td>\n",
       "      <td>-0.3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>AMT Filers (#m)</th>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tax before Credits ($b)</th>\n",
       "      <td>5.8</td>\n",
       "      <td>5.8</td>\n",
       "      <td>6.1</td>\n",
       "      <td>6.4</td>\n",
       "      <td>6.9</td>\n",
       "      <td>7.4</td>\n",
       "      <td>8.0</td>\n",
       "      <td>8.8</td>\n",
       "      <td>9.6</td>\n",
       "      <td>10.3</td>\n",
       "      <td>10.9</td>\n",
       "      <td>11.4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Refundable Credits ($b)</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "      <td>0.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Nonrefundable Credits ($b)</th>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.1</td>\n",
       "      <td>-0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Reform Surtaxes ($b)</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ind Income Tax ($b)</th>\n",
       "      <td>6.6</td>\n",
       "      <td>6.6</td>\n",
       "      <td>6.9</td>\n",
       "      <td>7.3</td>\n",
       "      <td>7.9</td>\n",
       "      <td>8.5</td>\n",
       "      <td>9.2</td>\n",
       "      <td>10.1</td>\n",
       "      <td>11.0</td>\n",
       "      <td>11.8</td>\n",
       "      <td>12.4</td>\n",
       "      <td>13.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Payroll Taxes ($b)</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Combined Liability ($b)</th>\n",
       "      <td>6.6</td>\n",
       "      <td>6.6</td>\n",
       "      <td>6.9</td>\n",
       "      <td>7.3</td>\n",
       "      <td>7.9</td>\n",
       "      <td>8.5</td>\n",
       "      <td>9.2</td>\n",
       "      <td>10.1</td>\n",
       "      <td>11.0</td>\n",
       "      <td>11.8</td>\n",
       "      <td>12.4</td>\n",
       "      <td>13.1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>With Income Tax &lt;= 0 (#m)</th>\n",
       "      <td>0.6</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.7</td>\n",
       "      <td>0.8</td>\n",
       "      <td>0.8</td>\n",
       "      <td>0.9</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>With Combined Tax &lt;= 0 (#m)</th>\n",
       "      <td>0.4</td>\n",
       "      <td>0.4</td>\n",
       "      <td>0.4</td>\n",
       "      <td>0.4</td>\n",
       "      <td>0.4</td>\n",
       "      <td>0.5</td>\n",
       "      <td>0.5</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.6</td>\n",
       "      <td>0.7</td>\n",
       "      <td>0.7</td>\n",
       "      <td>0.7</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                   2014     2015     2016     2017     2018  \\\n",
       "Returns (#m)                        0.0      0.0      0.0      0.0      0.0   \n",
       "AGI ($b)                           -3.9     -3.9     -4.1     -4.5     -5.0   \n",
       "Itemizers (#m)                     -0.1     -0.2     -0.2     -0.2     -0.2   \n",
       "Itemized Deduction ($b)            -3.9     -4.1     -3.9     -4.4     -4.9   \n",
       "Standard Deduction Filers (#m)      0.1      0.1      0.1      0.1      0.1   \n",
       "Standard Deduction ($b)             0.6      0.7      0.6      0.5      0.7   \n",
       "Personal Exemption ($b)            -0.4     -0.5     -0.6     -0.6     -0.6   \n",
       "Taxable Income ($b)                 5.9      5.8      6.0      6.2      6.4   \n",
       "Regular Tax ($b)                    6.0      5.9      6.2      6.6      7.1   \n",
       "AMT Income ($b)                    -1.9     -1.7     -2.2     -2.0     -2.7   \n",
       "AMT Liability ($b)                 -0.1     -0.1     -0.1     -0.1     -0.2   \n",
       "AMT Filers (#m)                    -0.0     -0.0      0.0      0.0      0.0   \n",
       "Tax before Credits ($b)             5.8      5.8      6.1      6.4      6.9   \n",
       "Refundable Credits ($b)             0.0      0.0      0.0      0.0      0.0   \n",
       "Nonrefundable Credits ($b)         -0.0     -0.0     -0.0     -0.0     -0.0   \n",
       "Reform Surtaxes ($b)                0.0      0.0      0.0      0.0      0.0   \n",
       "Ind Income Tax ($b)                 6.6      6.6      6.9      7.3      7.9   \n",
       "Payroll Taxes ($b)                  0.0      0.0      0.0      0.0      0.0   \n",
       "Combined Liability ($b)             6.6      6.6      6.9      7.3      7.9   \n",
       "With Income Tax <= 0 (#m)           0.6      0.6      0.6      0.6      0.6   \n",
       "With Combined Tax <= 0 (#m)         0.4      0.4      0.4      0.4      0.4   \n",
       "\n",
       "                                   2019     2020     2021     2022     2023  \\\n",
       "Returns (#m)                        0.0      0.0      0.0      0.0      0.0   \n",
       "AGI ($b)                           -5.6     -6.3     -7.2     -8.2     -9.1   \n",
       "Itemizers (#m)                     -0.2     -0.2     -0.2     -0.2     -0.2   \n",
       "Itemized Deduction ($b)            -5.1     -5.3     -6.0     -6.3     -5.3   \n",
       "Standard Deduction Filers (#m)      0.1      0.1      0.1      0.1      0.1   \n",
       "Standard Deduction ($b)             0.6      0.6      0.8      0.9      0.7   \n",
       "Personal Exemption ($b)            -0.6     -0.7     -0.7     -0.8     -0.8   \n",
       "Taxable Income ($b)                 6.7      6.9      7.5      7.9      7.8   \n",
       "Regular Tax ($b)                    7.7      8.2      9.1      9.9     10.6   \n",
       "AMT Income ($b)                    -3.2     -3.4     -3.9     -5.2     -7.0   \n",
       "AMT Liability ($b)                 -0.2     -0.1     -0.2     -0.3     -0.3   \n",
       "AMT Filers (#m)                     0.0     -0.0     -0.0     -0.0     -0.0   \n",
       "Tax before Credits ($b)             7.4      8.0      8.8      9.6     10.3   \n",
       "Refundable Credits ($b)             0.0      0.0      0.0      0.0      0.1   \n",
       "Nonrefundable Credits ($b)         -0.0     -0.0     -0.1     -0.1     -0.1   \n",
       "Reform Surtaxes ($b)                0.0      0.0      0.0      0.0      0.0   \n",
       "Ind Income Tax ($b)                 8.5      9.2     10.1     11.0     11.8   \n",
       "Payroll Taxes ($b)                  0.0      0.0      0.0      0.0      0.0   \n",
       "Combined Liability ($b)             8.5      9.2     10.1     11.0     11.8   \n",
       "With Income Tax <= 0 (#m)           0.7      0.8      0.8      0.9      1.0   \n",
       "With Combined Tax <= 0 (#m)         0.5      0.5      0.6      0.6      0.7   \n",
       "\n",
       "                                   2024     2025  \n",
       "Returns (#m)                        0.0      0.0  \n",
       "AGI ($b)                          -10.1    -11.1  \n",
       "Itemizers (#m)                     -0.2     -0.2  \n",
       "Itemized Deduction ($b)            -5.9     -5.7  \n",
       "Standard Deduction Filers (#m)      0.1      0.1  \n",
       "Standard Deduction ($b)             0.7      0.6  \n",
       "Personal Exemption ($b)            -0.9     -0.9  \n",
       "Taxable Income ($b)                 7.9      8.2  \n",
       "Regular Tax ($b)                   11.2     11.9  \n",
       "AMT Income ($b)                    -7.6     -9.1  \n",
       "AMT Liability ($b)                 -0.3     -0.3  \n",
       "AMT Filers (#m)                    -0.0     -0.0  \n",
       "Tax before Credits ($b)            10.9     11.4  \n",
       "Refundable Credits ($b)             0.1      0.1  \n",
       "Nonrefundable Credits ($b)         -0.1     -0.0  \n",
       "Reform Surtaxes ($b)                0.0      0.0  \n",
       "Ind Income Tax ($b)                12.4     13.1  \n",
       "Payroll Taxes ($b)                  0.0      0.0  \n",
       "Combined Liability ($b)            12.4     13.1  \n",
       "With Income Tax <= 0 (#m)           1.0      1.0  \n",
       "With Combined Tax <= 0 (#m)         0.7      0.7  "
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "diag_adj - diag_none"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "mtr_adj_payroll, mtr_adj_inc, mtr_adj_comb = calc.mtr('e00300')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {
    "collapsed": false
   },
   "outputs": [],
   "source": [
    "mtr_none_payroll, mtr_none_inc, mtr_none_comb = calc_none.mtr('e00300')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "mtr_data = utils.mtr_graph_data(calc_none, calc, mtr_variable='e00300', income_measure='agi')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "\n",
       "    <div class=\"bk-root\">\n",
       "        <div class=\"plotdiv\" id=\"78989791-eb5b-491f-8071-86bf9fa0f6d3\"></div>\n",
       "    </div>\n",
       "<script type=\"text/javascript\">\n",
       "  \n",
       "  (function(global) {\n",
       "    function now() {\n",
       "      return new Date();\n",
       "    }\n",
       "  \n",
       "    var force = \"\";\n",
       "  \n",
       "    if (typeof (window._bokeh_onload_callbacks) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_onload_callbacks = [];\n",
       "      window._bokeh_is_loading = undefined;\n",
       "    }\n",
       "  \n",
       "  \n",
       "    \n",
       "    if (typeof (window._bokeh_timeout) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_timeout = Date.now() + 0;\n",
       "      window._bokeh_failed_load = false;\n",
       "    }\n",
       "  \n",
       "    var NB_LOAD_WARNING = {'data': {'text/html':\n",
       "       \"<div style='background-color: #fdd'>\\n\"+\n",
       "       \"<p>\\n\"+\n",
       "       \"BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \\n\"+\n",
       "       \"may be due to a slow or bad network connection. Possible fixes:\\n\"+\n",
       "       \"</p>\\n\"+\n",
       "       \"<ul>\\n\"+\n",
       "       \"<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\\n\"+\n",
       "       \"<li>use INLINE resources instead, as so:</li>\\n\"+\n",
       "       \"</ul>\\n\"+\n",
       "       \"<code>\\n\"+\n",
       "       \"from bokeh.resources import INLINE\\n\"+\n",
       "       \"output_notebook(resources=INLINE)\\n\"+\n",
       "       \"</code>\\n\"+\n",
       "       \"</div>\"}};\n",
       "  \n",
       "    function display_loaded() {\n",
       "      if (window.Bokeh !== undefined) {\n",
       "        Bokeh.$(\"#78989791-eb5b-491f-8071-86bf9fa0f6d3\").text(\"BokehJS successfully loaded.\");\n",
       "      } else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(display_loaded, 100)\n",
       "      }\n",
       "    }\n",
       "  \n",
       "    function run_callbacks() {\n",
       "      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });\n",
       "      delete window._bokeh_onload_callbacks\n",
       "      console.info(\"Bokeh: all callbacks have finished\");\n",
       "    }\n",
       "  \n",
       "    function load_libs(js_urls, callback) {\n",
       "      window._bokeh_onload_callbacks.push(callback);\n",
       "      if (window._bokeh_is_loading > 0) {\n",
       "        console.log(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n",
       "        return null;\n",
       "      }\n",
       "      if (js_urls == null || js_urls.length === 0) {\n",
       "        run_callbacks();\n",
       "        return null;\n",
       "      }\n",
       "      console.log(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n",
       "      window._bokeh_is_loading = js_urls.length;\n",
       "      for (var i = 0; i < js_urls.length; i++) {\n",
       "        var url = js_urls[i];\n",
       "        var s = document.createElement('script');\n",
       "        s.src = url;\n",
       "        s.async = false;\n",
       "        s.onreadystatechange = s.onload = function() {\n",
       "          window._bokeh_is_loading--;\n",
       "          if (window._bokeh_is_loading === 0) {\n",
       "            console.log(\"Bokeh: all BokehJS libraries loaded\");\n",
       "            run_callbacks()\n",
       "          }\n",
       "        };\n",
       "        s.onerror = function() {\n",
       "          console.warn(\"failed to load library \" + url);\n",
       "        };\n",
       "        console.log(\"Bokeh: injecting script tag for BokehJS library: \", url);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      }\n",
       "    };var element = document.getElementById(\"78989791-eb5b-491f-8071-86bf9fa0f6d3\");\n",
       "    if (element == null) {\n",
       "      console.log(\"Bokeh: ERROR: autoload.js configured with elementid '78989791-eb5b-491f-8071-86bf9fa0f6d3' but no matching script tag was found. \")\n",
       "      return false;\n",
       "    }\n",
       "  \n",
       "    var js_urls = [];\n",
       "  \n",
       "    var inline_js = [\n",
       "      function(Bokeh) {\n",
       "        Bokeh.$(function() {\n",
       "            var docs_json = {\"98640f1a-6b15-4a5e-b97d-6ef082cb3874\":{\"roots\":{\"references\":[{\"attributes\":{\"callback\":null},\"id\":\"93c3d5dd-dc1f-47d9-a4c0-3bb7f60a0ed4\",\"type\":\"DataRange1d\"},{\"attributes\":{\"active_drag\":\"auto\",\"active_scroll\":\"auto\",\"active_tap\":\"auto\",\"tools\":[{\"id\":\"9c701ac5-cef4-476b-9ddb-8a62e5c6ae41\",\"type\":\"PanTool\"},{\"id\":\"aa876d95-9778-4264-b475-193b9b29b362\",\"type\":\"WheelZoomTool\"},{\"id\":\"70ee2f4d-a6fa-41d9-849e-99507f26ce65\",\"type\":\"BoxZoomTool\"},{\"id\":\"923e2d58-6232-4979-b1c6-24678f9df395\",\"type\":\"SaveTool\"},{\"id\":\"5b23084c-8c8f-4d96-979a-c5000138a2b6\",\"type\":\"ResetTool\"},{\"id\":\"c83605ba-9e7e-416f-96ab-05423610e131\",\"type\":\"HelpTool\"}]},\"id\":\"e24666fe-8f14-434e-b059-2fdc3a051f16\",\"type\":\"Toolbar\"},{\"attributes\":{\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"88d436dd-951e-4670-ba89-b9e021503604\",\"type\":\"BasicTicker\"}},\"id\":\"8e1f7933-fa12-4528-ada2-bf429135a881\",\"type\":\"Grid\"},{\"attributes\":{\"data_source\":{\"id\":\"83ff49d4-2a0f-4245-84f1-8acf77ad680f\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"355d222b-68df-4466-a0c1-e32d7752744c\",\"type\":\"Line\"},\"hover_glyph\":null,\"nonselection_glyph\":{\"id\":\"58d6fad0-0346-48a2-881c-2e393e4fda04\",\"type\":\"Line\"},\"selection_glyph\":null},\"id\":\"3b8fb7b0-d3d4-43b0-98d1-279992c19f7c\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.1},\"fill_color\":{\"value\":\"#1f77b4\"},\"line_alpha\":{\"value\":0.1},\"line_color\":{\"value\":\"#1f77b4\"},\"visible\":false,\"x\":{\"value\":0},\"y\":{\"value\":0}},\"id\":\"4999ab24-6051-42bb-9fcf-30c018c0ac9a\",\"type\":\"Circle\"},{\"attributes\":{\"overlay\":{\"id\":\"153baf64-898e-4636-b5fe-53cc561ed224\",\"type\":\"BoxAnnotation\"},\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"70ee2f4d-a6fa-41d9-849e-99507f26ce65\",\"type\":\"BoxZoomTool\"},{\"attributes\":{\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"9c701ac5-cef4-476b-9ddb-8a62e5c6ae41\",\"type\":\"PanTool\"},{\"attributes\":{\"data_source\":{\"id\":\"4b1d056d-2bce-4029-998e-40c8b740adf2\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"e6c9ac1e-f239-4fad-8e04-4a1d9ef7df7c\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":{\"id\":\"4999ab24-6051-42bb-9fcf-30c018c0ac9a\",\"type\":\"Circle\"},\"selection_glyph\":null},\"id\":\"8dd43ccf-ac6e-4485-857d-ffe2aa86276d\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"plot\":null,\"text\":\"Mean Marginal Tax Rate for e00300 by Income Percentile for 2014\",\"text_font_size\":{\"value\":\"12pt\"}},\"id\":\"b71c5109-3d25-478d-89f4-224e6bfcdce7\",\"type\":\"Title\"},{\"attributes\":{\"glyph_height\":14,\"glyph_width\":14,\"items\":[{\"id\":\"ae20c612-2ff9-4738-acbe-006dc2018dd3\",\"type\":\"LegendItem\"},{\"id\":\"80af703f-abd4-489b-a631-314e3cfd1216\",\"type\":\"LegendItem\"}],\"label_height\":2,\"label_standoff\":2,\"label_text_font\":\"times\",\"label_text_font_style\":\"italic\",\"label_width\":2,\"location\":\"bottom_right\",\"padding\":5,\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"spacing\":5},\"id\":\"076daf3f-17a5-469a-b80b-ef61d83ab0e0\",\"type\":\"Legend\"},{\"attributes\":{\"line_alpha\":{\"value\":0.1},\"line_color\":{\"value\":\"#1f77b4\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"396e08ea-08c4-4c4a-a645-d31897cd48fc\",\"type\":\"Line\"},{\"attributes\":{},\"id\":\"eae0a23a-d40e-46ae-bd71-50a6d1e80e0d\",\"type\":\"BasicTicker\"},{\"attributes\":{\"axis_label\":\"AGI Percentile\",\"axis_label_text_font_size\":{\"value\":\"12pt\"},\"axis_label_text_font_style\":\"normal\",\"formatter\":{\"id\":\"bfeba1db-b730-4de3-87e1-2613ba9a4089\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"88d436dd-951e-4670-ba89-b9e021503604\",\"type\":\"BasicTicker\"}},\"id\":\"857c4513-d610-45a1-962a-8b04fde44d6a\",\"type\":\"LinearAxis\"},{\"attributes\":{\"callback\":null},\"id\":\"45f21b0e-0a24-4138-8931-00da47bc1e2e\",\"type\":\"DataRange1d\"},{\"attributes\":{\"dimension\":1,\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"eae0a23a-d40e-46ae-bd71-50a6d1e80e0d\",\"type\":\"BasicTicker\"}},\"id\":\"15c3db34-d478-4d5b-8cef-c83e1e8e71ec\",\"type\":\"Grid\"},{\"attributes\":{},\"id\":\"7407905f-3068-4362-8bde-b6530bfed874\",\"type\":\"ToolEvents\"},{\"attributes\":{\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"aa876d95-9778-4264-b475-193b9b29b362\",\"type\":\"WheelZoomTool\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"y\",\"x\"],\"data\":{\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99],\"y\":[0.001727353532486241,1.8520357686041917e-05,0.0,0.0,2.7861933771460212e-05,3.942340532892151e-06,0.0,0.0,0.0,5.655662795439656e-06,0.0003156769085140678,0.0007181970719594013,0.0014578693375459325,0.0008193272122253168,0.0010922153142323156,0.000767320740639104,0.001772485460007382,0.002017120675915104,0.0014505763771941362,0.001786268871904832,0.0022168518944823746,0.0214544047726978,0.017278761064633986,0.01933766163593266,0.030109435928361294,0.02597562253199501,0.02449931443272894,0.042503988068454346,0.04143237970329827,0.05775342991629081,0.061555837589547024,0.06061941945062306,0.05986191991666143,0.05885340030178538,0.048520527005461465,0.04753838275341471,0.051203962627446566,0.05713677295342218,0.07639744921275421,0.10404775121302882,0.10890378514162376,0.11924362377310779,0.12631334291033214,0.12860986299560206,0.14660983635391311,0.15452009863589375,0.1616568799090447,0.1608855844412358,0.16783517425290045,0.16735876607374137,0.17008099055209483,0.17186851828109515,0.17821750480203918,0.1814777641696991,0.18768155704072878,0.1875429247566661,0.18804855029721262,0.18752186900668666,0.1871895744044204,0.17692208763121703,0.18159622726231744,0.18564680436093373,0.17824137102908505,0.17286992023306078,0.1919867617035025,0.19812908818817448,0.20329489654662525,0.20186415438095084,0.20380038789999036,0.20595879308091072,0.2006613512100619,0.20029413198696858,0.19945915570021633,0.198295663819457,0.20052140985520628,0.20366682558456742,0.2029817468432618,0.20070116072115202,0.19888518502184432,0.1958097764000443,0.19510301514123576,0.19217306442897114,0.1852528832009773,0.19063375558905077,0.20280659025867034,0.21984652168512603,0.23677170332343309,0.26172953284858796,0.2670624818927895,0.2709787964381876,0.26857110102259346,0.26626840886909275,0.2656139531347075,0.26921976209607085,0.2813775454509151,0.2819991377809247,0.30254397909437325,0.3592735654930622,0.3811553679034151,0.4051361524310662]}},\"id\":\"83ff49d4-2a0f-4245-84f1-8acf77ad680f\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"5b23084c-8c8f-4d96-979a-c5000138a2b6\",\"type\":\"ResetTool\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"y\",\"x\"],\"data\":{\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99],\"y\":[0.0017289682620707254,1.8520357686041917e-05,0.0,0.0,2.7861933771460212e-05,3.942340532892151e-06,0.0,0.0,0.0,5.655662795439656e-06,0.00045423194548144843,0.002710435401708448,0.002677555489382815,0.002890419498285237,0.001633274083126963,0.0009083660376955525,0.0021911095405099004,0.0023951147551018737,0.0016412597600601593,0.0019767937585025573,0.0030681015644339416,0.021833506367905573,0.017737469869770976,0.019433871453732494,0.030401356559356094,0.026049200030653363,0.02449931443262364,0.042985452908807266,0.04153751032816621,0.05919798500756894,0.0629057091790598,0.06127855334827271,0.060237121236892906,0.05957247710209813,0.04935376647328979,0.048448661445577045,0.05187159196887905,0.057829382585426255,0.07685390092428795,0.1045334999062466,0.10998891859203351,0.12081757477131808,0.12907998360943596,0.13014810837400262,0.15035760293087536,0.15701564196347464,0.16345937208371666,0.16217086283733614,0.16963861216797507,0.1680179821874814,0.17143956161133986,0.1745714078478134,0.17968295280529906,0.18269845597061013,0.18868615093697294,0.18878601213139798,0.1890880240916421,0.18903243425847582,0.1877910945643968,0.17732936683338332,0.18280517740657848,0.187783007761153,0.17943772744727127,0.1739415229548905,0.1929501897745277,0.20219557360024357,0.20469202756801103,0.20275227164315016,0.2035284891858194,0.20637905152572922,0.20136639070118165,0.20043650495176316,0.19938955659037755,0.19867985203381902,0.20098927060667796,0.20379987055660004,0.2026482335143711,0.2001839540273266,0.19883969437662488,0.1954750867802186,0.19486394713138622,0.191817607087446,0.1848125926894454,0.19141221114651094,0.2038459517461284,0.22049571091997114,0.23736581971215198,0.2618504598158565,0.2670619476592276,0.27116523136738263,0.2685502237952982,0.26621828646076745,0.2656098394646005,0.26923299757119434,0.2814255273708871,0.28194902862254284,0.30248707303451294,0.35878906435178265,0.3809936846963014,0.40487046792218756]}},\"id\":\"85c22bf3-0b8a-4ff7-9067-4e5d96fabc15\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"label\":{\"value\":\"Reform\"},\"renderers\":[{\"id\":\"3b8fb7b0-d3d4-43b0-98d1-279992c19f7c\",\"type\":\"GlyphRenderer\"}]},\"id\":\"80af703f-abd4-489b-a631-314e3cfd1216\",\"type\":\"LegendItem\"},{\"attributes\":{\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"923e2d58-6232-4979-b1c6-24678f9df395\",\"type\":\"SaveTool\"},{\"attributes\":{\"label\":{\"value\":\"Base\"},\"renderers\":[{\"id\":\"22f648f9-60ff-4962-9d8b-ec2497511dfb\",\"type\":\"GlyphRenderer\"}]},\"id\":\"ae20c612-2ff9-4738-acbe-006dc2018dd3\",\"type\":\"LegendItem\"},{\"attributes\":{},\"id\":\"88d436dd-951e-4670-ba89-b9e021503604\",\"type\":\"BasicTicker\"},{\"attributes\":{\"line_alpha\":{\"value\":0.1},\"line_color\":{\"value\":\"#1f77b4\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"58d6fad0-0346-48a2-881c-2e393e4fda04\",\"type\":\"Line\"},{\"attributes\":{},\"id\":\"bfeba1db-b730-4de3-87e1-2613ba9a4089\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"line_color\":{\"value\":\"red\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"355d222b-68df-4466-a0c1-e32d7752744c\",\"type\":\"Line\"},{\"attributes\":{\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"c83605ba-9e7e-416f-96ab-05423610e131\",\"type\":\"HelpTool\"},{\"attributes\":{\"data_source\":{\"id\":\"85c22bf3-0b8a-4ff7-9067-4e5d96fabc15\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"df178d0a-91d9-445d-958b-034025fec2ae\",\"type\":\"Line\"},\"hover_glyph\":null,\"nonselection_glyph\":{\"id\":\"396e08ea-08c4-4c4a-a645-d31897cd48fc\",\"type\":\"Line\"},\"selection_glyph\":null},\"id\":\"22f648f9-60ff-4962-9d8b-ec2497511dfb\",\"type\":\"GlyphRenderer\"},{\"attributes\":{},\"id\":\"5731ab46-6d14-48c0-a8fb-d34db3dcd790\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"bottom_units\":\"screen\",\"fill_alpha\":{\"value\":0.5},\"fill_color\":{\"value\":\"lightgrey\"},\"left_units\":\"screen\",\"level\":\"overlay\",\"line_alpha\":{\"value\":1.0},\"line_color\":{\"value\":\"black\"},\"line_dash\":[4,4],\"line_width\":{\"value\":2},\"plot\":null,\"render_mode\":\"css\",\"right_units\":\"screen\",\"top_units\":\"screen\"},\"id\":\"153baf64-898e-4636-b5fe-53cc561ed224\",\"type\":\"BoxAnnotation\"},{\"attributes\":{\"line_color\":{\"value\":\"blue\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"df178d0a-91d9-445d-958b-034025fec2ae\",\"type\":\"Line\"},{\"attributes\":{\"axis_label\":\"Income+Payroll-Tax MTR\",\"axis_label_text_font_size\":{\"value\":\"12pt\"},\"axis_label_text_font_style\":\"normal\",\"formatter\":{\"id\":\"5731ab46-6d14-48c0-a8fb-d34db3dcd790\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"eae0a23a-d40e-46ae-bd71-50a6d1e80e0d\",\"type\":\"BasicTicker\"}},\"id\":\"407275d4-3b29-4f9f-b66a-363b4c6d8485\",\"type\":\"LinearAxis\"},{\"attributes\":{\"callback\":null},\"id\":\"4b1d056d-2bce-4029-998e-40c8b740adf2\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"below\":[{\"id\":\"857c4513-d610-45a1-962a-8b04fde44d6a\",\"type\":\"LinearAxis\"}],\"left\":[{\"id\":\"407275d4-3b29-4f9f-b66a-363b4c6d8485\",\"type\":\"LinearAxis\"}],\"plot_height\":500,\"plot_width\":850,\"renderers\":[{\"id\":\"857c4513-d610-45a1-962a-8b04fde44d6a\",\"type\":\"LinearAxis\"},{\"id\":\"8e1f7933-fa12-4528-ada2-bf429135a881\",\"type\":\"Grid\"},{\"id\":\"407275d4-3b29-4f9f-b66a-363b4c6d8485\",\"type\":\"LinearAxis\"},{\"id\":\"15c3db34-d478-4d5b-8cef-c83e1e8e71ec\",\"type\":\"Grid\"},{\"id\":\"153baf64-898e-4636-b5fe-53cc561ed224\",\"type\":\"BoxAnnotation\"},{\"id\":\"076daf3f-17a5-469a-b80b-ef61d83ab0e0\",\"type\":\"Legend\"},{\"id\":\"22f648f9-60ff-4962-9d8b-ec2497511dfb\",\"type\":\"GlyphRenderer\"},{\"id\":\"3b8fb7b0-d3d4-43b0-98d1-279992c19f7c\",\"type\":\"GlyphRenderer\"},{\"id\":\"8dd43ccf-ac6e-4485-857d-ffe2aa86276d\",\"type\":\"GlyphRenderer\"}],\"title\":{\"id\":\"b71c5109-3d25-478d-89f4-224e6bfcdce7\",\"type\":\"Title\"},\"tool_events\":{\"id\":\"7407905f-3068-4362-8bde-b6530bfed874\",\"type\":\"ToolEvents\"},\"toolbar\":{\"id\":\"e24666fe-8f14-434e-b059-2fdc3a051f16\",\"type\":\"Toolbar\"},\"x_range\":{\"id\":\"93c3d5dd-dc1f-47d9-a4c0-3bb7f60a0ed4\",\"type\":\"DataRange1d\"},\"y_range\":{\"id\":\"45f21b0e-0a24-4138-8931-00da47bc1e2e\",\"type\":\"DataRange1d\"}},\"id\":\"40479d9c-f4ba-424a-901f-a71f64773627\",\"subtype\":\"Figure\",\"type\":\"Plot\"},{\"attributes\":{\"fill_color\":{\"value\":\"#1f77b4\"},\"line_color\":{\"value\":\"#1f77b4\"},\"visible\":false,\"x\":{\"value\":0},\"y\":{\"value\":0}},\"id\":\"e6c9ac1e-f239-4fad-8e04-4a1d9ef7df7c\",\"type\":\"Circle\"}],\"root_ids\":[\"40479d9c-f4ba-424a-901f-a71f64773627\"]},\"title\":\"Bokeh Application\",\"version\":\"0.12.3\"}};\n",
       "            var render_items = [{\"docid\":\"98640f1a-6b15-4a5e-b97d-6ef082cb3874\",\"elementid\":\"78989791-eb5b-491f-8071-86bf9fa0f6d3\",\"modelid\":\"40479d9c-f4ba-424a-901f-a71f64773627\"}];\n",
       "            \n",
       "            Bokeh.embed.embed_items(docs_json, render_items);\n",
       "        });\n",
       "      },\n",
       "      function(Bokeh) {\n",
       "      }\n",
       "    ];\n",
       "  \n",
       "    function run_inline_js() {\n",
       "      \n",
       "      if ((window.Bokeh !== undefined) || (force === \"1\")) {\n",
       "        for (var i = 0; i < inline_js.length; i++) {\n",
       "          inline_js[i](window.Bokeh);\n",
       "        }if (force === \"1\") {\n",
       "          display_loaded();\n",
       "        }} else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(run_inline_js, 100);\n",
       "      } else if (!window._bokeh_failed_load) {\n",
       "        console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n",
       "        window._bokeh_failed_load = true;\n",
       "      } else if (!force) {\n",
       "        var cell = $(\"#78989791-eb5b-491f-8071-86bf9fa0f6d3\").parents('.cell').data().cell;\n",
       "        cell.output_area.append_execute_result(NB_LOAD_WARNING)\n",
       "      }\n",
       "  \n",
       "    }\n",
       "  \n",
       "    if (window._bokeh_is_loading === 0) {\n",
       "      console.log(\"Bokeh: BokehJS loaded, going straight to plotting\");\n",
       "      run_inline_js();\n",
       "    } else {\n",
       "      load_libs(js_urls, function() {\n",
       "        console.log(\"Bokeh: BokehJS plotting callback run at\", now());\n",
       "        run_inline_js();\n",
       "      });\n",
       "    }\n",
       "  }(this));\n",
       "</script>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "fig = utils.xtr_graph_plot(mtr_data)\n",
    "show(fig)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "atr_data = utils.atr_graph_data(calc_none, calc)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "\n",
       "    <div class=\"bk-root\">\n",
       "        <div class=\"plotdiv\" id=\"a1079ce1-71c0-4b22-98f2-b3678fb52828\"></div>\n",
       "    </div>\n",
       "<script type=\"text/javascript\">\n",
       "  \n",
       "  (function(global) {\n",
       "    function now() {\n",
       "      return new Date();\n",
       "    }\n",
       "  \n",
       "    var force = \"\";\n",
       "  \n",
       "    if (typeof (window._bokeh_onload_callbacks) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_onload_callbacks = [];\n",
       "      window._bokeh_is_loading = undefined;\n",
       "    }\n",
       "  \n",
       "  \n",
       "    \n",
       "    if (typeof (window._bokeh_timeout) === \"undefined\" || force !== \"\") {\n",
       "      window._bokeh_timeout = Date.now() + 0;\n",
       "      window._bokeh_failed_load = false;\n",
       "    }\n",
       "  \n",
       "    var NB_LOAD_WARNING = {'data': {'text/html':\n",
       "       \"<div style='background-color: #fdd'>\\n\"+\n",
       "       \"<p>\\n\"+\n",
       "       \"BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \\n\"+\n",
       "       \"may be due to a slow or bad network connection. Possible fixes:\\n\"+\n",
       "       \"</p>\\n\"+\n",
       "       \"<ul>\\n\"+\n",
       "       \"<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\\n\"+\n",
       "       \"<li>use INLINE resources instead, as so:</li>\\n\"+\n",
       "       \"</ul>\\n\"+\n",
       "       \"<code>\\n\"+\n",
       "       \"from bokeh.resources import INLINE\\n\"+\n",
       "       \"output_notebook(resources=INLINE)\\n\"+\n",
       "       \"</code>\\n\"+\n",
       "       \"</div>\"}};\n",
       "  \n",
       "    function display_loaded() {\n",
       "      if (window.Bokeh !== undefined) {\n",
       "        Bokeh.$(\"#a1079ce1-71c0-4b22-98f2-b3678fb52828\").text(\"BokehJS successfully loaded.\");\n",
       "      } else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(display_loaded, 100)\n",
       "      }\n",
       "    }\n",
       "  \n",
       "    function run_callbacks() {\n",
       "      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });\n",
       "      delete window._bokeh_onload_callbacks\n",
       "      console.info(\"Bokeh: all callbacks have finished\");\n",
       "    }\n",
       "  \n",
       "    function load_libs(js_urls, callback) {\n",
       "      window._bokeh_onload_callbacks.push(callback);\n",
       "      if (window._bokeh_is_loading > 0) {\n",
       "        console.log(\"Bokeh: BokehJS is being loaded, scheduling callback at\", now());\n",
       "        return null;\n",
       "      }\n",
       "      if (js_urls == null || js_urls.length === 0) {\n",
       "        run_callbacks();\n",
       "        return null;\n",
       "      }\n",
       "      console.log(\"Bokeh: BokehJS not loaded, scheduling load and callback at\", now());\n",
       "      window._bokeh_is_loading = js_urls.length;\n",
       "      for (var i = 0; i < js_urls.length; i++) {\n",
       "        var url = js_urls[i];\n",
       "        var s = document.createElement('script');\n",
       "        s.src = url;\n",
       "        s.async = false;\n",
       "        s.onreadystatechange = s.onload = function() {\n",
       "          window._bokeh_is_loading--;\n",
       "          if (window._bokeh_is_loading === 0) {\n",
       "            console.log(\"Bokeh: all BokehJS libraries loaded\");\n",
       "            run_callbacks()\n",
       "          }\n",
       "        };\n",
       "        s.onerror = function() {\n",
       "          console.warn(\"failed to load library \" + url);\n",
       "        };\n",
       "        console.log(\"Bokeh: injecting script tag for BokehJS library: \", url);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      }\n",
       "    };var element = document.getElementById(\"a1079ce1-71c0-4b22-98f2-b3678fb52828\");\n",
       "    if (element == null) {\n",
       "      console.log(\"Bokeh: ERROR: autoload.js configured with elementid 'a1079ce1-71c0-4b22-98f2-b3678fb52828' but no matching script tag was found. \")\n",
       "      return false;\n",
       "    }\n",
       "  \n",
       "    var js_urls = [];\n",
       "  \n",
       "    var inline_js = [\n",
       "      function(Bokeh) {\n",
       "        Bokeh.$(function() {\n",
       "            var docs_json = {\"28a3b5a2-8e42-4a1f-b697-a6bd5560f798\":{\"roots\":{\"references\":[{\"attributes\":{\"active_drag\":\"auto\",\"active_scroll\":\"auto\",\"active_tap\":\"auto\",\"tools\":[{\"id\":\"4595400c-f891-4e04-82e0-766fc736404a\",\"type\":\"PanTool\"},{\"id\":\"894faf1b-3da0-4f26-897f-364b711c4105\",\"type\":\"WheelZoomTool\"},{\"id\":\"fac88590-4a2b-410a-bec5-54c7f4f68b71\",\"type\":\"BoxZoomTool\"},{\"id\":\"8d8d4747-00dd-426b-a37b-9c8e4d7fc7f3\",\"type\":\"SaveTool\"},{\"id\":\"20e884d1-338e-43e4-99f0-15127574e9b9\",\"type\":\"ResetTool\"},{\"id\":\"da9ed4b1-7283-48a6-90ca-d1ad2de66298\",\"type\":\"HelpTool\"}]},\"id\":\"d14e1666-c26c-4ce0-b98d-ff080beba114\",\"type\":\"Toolbar\"},{\"attributes\":{\"plot\":null,\"text\":\"Average Tax Rate by Income Percentile for 2014\",\"text_font_size\":{\"value\":\"12pt\"}},\"id\":\"eca4e9aa-ab67-43f5-9b45-9549815a4dfb\",\"type\":\"Title\"},{\"attributes\":{\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"8d8d4747-00dd-426b-a37b-9c8e4d7fc7f3\",\"type\":\"SaveTool\"},{\"attributes\":{},\"id\":\"8df23d5e-a4ba-4319-91e3-d76ffb15ec20\",\"type\":\"ToolEvents\"},{\"attributes\":{},\"id\":\"d74b6527-ddfa-496f-8cbd-da4e756c1cf2\",\"type\":\"BasicTicker\"},{\"attributes\":{\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"20e884d1-338e-43e4-99f0-15127574e9b9\",\"type\":\"ResetTool\"},{\"attributes\":{\"callback\":null},\"id\":\"79798263-fafd-443b-8879-269254e5d307\",\"type\":\"ColumnDataSource\"},{\"attributes\":{\"fill_color\":{\"value\":\"#1f77b4\"},\"line_color\":{\"value\":\"#1f77b4\"},\"visible\":false,\"x\":{\"value\":0},\"y\":{\"value\":0}},\"id\":\"711812bd-1c15-4b70-a331-c133762a9b65\",\"type\":\"Circle\"},{\"attributes\":{\"callback\":null},\"id\":\"99f6f422-6738-4892-88e5-1f8b5800a076\",\"type\":\"DataRange1d\"},{\"attributes\":{\"label\":{\"value\":\"Reform\"},\"renderers\":[{\"id\":\"b5633406-b913-496c-a537-ed6e127310c2\",\"type\":\"GlyphRenderer\"}]},\"id\":\"88d370c3-366c-4a86-8f86-8262bb5f1fc3\",\"type\":\"LegendItem\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"y\",\"x\"],\"data\":{\"x\":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99],\"y\":[0.07918382754974035,0.06702164691622807,0.06285655221975021,0.054974761085959604,0.059689949956716976,0.05407368538189316,0.035609579570152344,0.04289199821645746,0.0288369200543352,0.03264162307433765,0.023525481766028585,0.015311118642428493,0.01325515257777495,0.006417775881706117,-0.01115497042648264,-0.03250508133085688,-0.025031905360154726,0.004845142118878642,0.0036468712646287203,0.00152471619777769,-0.01106116643484491,-0.011543365965944075,-0.01426127751774297,-0.013642313134251157,-0.0009222161258257838,0.0032122086904705894,0.017774735165982963,0.02457103817993242,0.03579781462537968,0.03158864390187404,0.03693445962432058,0.040913904675135566,0.05038053298440919,0.05732084732143854,0.05270293292178961,0.06016543552548698,0.07256792861729663,0.07576295821035924,0.08007583289832958,0.07398901934140739,0.08702970881454876,0.09374967849754015,0.09137515884598485,0.09064076576964859,0.09784698175743518,0.09235586343295643,0.09586140407211945,0.10933812895808481,0.11640585339016928,0.11939156042758847,0.12473479182731091,0.13354460106204938,0.13803450252363403,0.13910189412277604,0.12994671481194425,0.13408336087125397,0.13033194661625513,0.1391338659370119,0.14825280490765164,0.14403136034484623,0.14868996933100076,0.14489505892335328,0.1562739608477302,0.1600622664466233,0.16214773726838194,0.16784646917882098,0.16652589611003438,0.17214769365523008,0.17515101580942352,0.18120814740601057,0.17760647965444007,0.18388341842672382,0.18498304188908932,0.18181713308165082,0.18692654508305598,0.18980484576081652,0.19079741177467793,0.19495554446951482,0.20360755222359087,0.20490889478030702,0.20591471884349538,0.20940639429751207,0.21033834687784556,0.2156948106064067,0.22541991980073559,0.2291070381968027,0.23388011914340004,0.23163485204798548,0.23433384705772628,0.23769537631378435,0.24379271562015137,0.24801602534689693,0.2526704695837354,0.26449976613228343,0.2806552593603676,0.3079645669630092]}},\"id\":\"c92c302a-0eb9-4312-a09c-08d3ffc67a2f\",\"type\":\"ColumnDataSource\"},{\"attributes\":{},\"id\":\"58e173eb-f2e4-433b-8a5c-b794801e77af\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"data_source\":{\"id\":\"79798263-fafd-443b-8879-269254e5d307\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"711812bd-1c15-4b70-a331-c133762a9b65\",\"type\":\"Circle\"},\"hover_glyph\":null,\"nonselection_glyph\":{\"id\":\"6f4d8b83-b93d-4ac7-a736-e00a362903f8\",\"type\":\"Circle\"},\"selection_glyph\":null},\"id\":\"6518d377-62ab-4fc3-bb23-206a24db1906\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"below\":[{\"id\":\"c18a38bf-c76e-4f15-830b-4327b8281670\",\"type\":\"LinearAxis\"}],\"left\":[{\"id\":\"5a42e1a4-ec19-48aa-8e5b-bba55b50d35e\",\"type\":\"LinearAxis\"}],\"plot_height\":500,\"plot_width\":850,\"renderers\":[{\"id\":\"c18a38bf-c76e-4f15-830b-4327b8281670\",\"type\":\"LinearAxis\"},{\"id\":\"bef5ea04-52b9-4f13-ab0a-c816ab88f5f1\",\"type\":\"Grid\"},{\"id\":\"5a42e1a4-ec19-48aa-8e5b-bba55b50d35e\",\"type\":\"LinearAxis\"},{\"id\":\"18683911-57ae-48af-878c-75bc9e403389\",\"type\":\"Grid\"},{\"id\":\"7527d213-5ba2-453b-b523-4ddad8d67a8e\",\"type\":\"BoxAnnotation\"},{\"id\":\"d4ccab24-c018-4186-b293-06a22bc824c3\",\"type\":\"Legend\"},{\"id\":\"3c7b7826-8a50-4dd5-b3c5-3e0511df6b5b\",\"type\":\"GlyphRenderer\"},{\"id\":\"b5633406-b913-496c-a537-ed6e127310c2\",\"type\":\"GlyphRenderer\"},{\"id\":\"6518d377-62ab-4fc3-bb23-206a24db1906\",\"type\":\"GlyphRenderer\"}],\"title\":{\"id\":\"eca4e9aa-ab67-43f5-9b45-9549815a4dfb\",\"type\":\"Title\"},\"tool_events\":{\"id\":\"8df23d5e-a4ba-4319-91e3-d76ffb15ec20\",\"type\":\"ToolEvents\"},\"toolbar\":{\"id\":\"d14e1666-c26c-4ce0-b98d-ff080beba114\",\"type\":\"Toolbar\"},\"x_range\":{\"id\":\"34be6ac0-3df6-4d23-8c52-ed30efdbf356\",\"type\":\"DataRange1d\"},\"y_range\":{\"id\":\"99f6f422-6738-4892-88e5-1f8b5800a076\",\"type\":\"DataRange1d\"}},\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"},{\"attributes\":{\"glyph_height\":14,\"glyph_width\":14,\"items\":[{\"id\":\"ab19cc2d-1cef-45f8-8852-e66da33748ba\",\"type\":\"LegendItem\"},{\"id\":\"88d370c3-366c-4a86-8f86-8262bb5f1fc3\",\"type\":\"LegendItem\"}],\"label_height\":2,\"label_standoff\":2,\"label_text_font\":\"times\",\"label_text_font_style\":\"italic\",\"label_width\":2,\"location\":\"bottom_right\",\"padding\":5,\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"spacing\":5},\"id\":\"d4ccab24-c018-4186-b293-06a22bc824c3\",\"type\":\"Legend\"},{\"attributes\":{\"overlay\":{\"id\":\"7527d213-5ba2-453b-b523-4ddad8d67a8e\",\"type\":\"BoxAnnotation\"},\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"fac88590-4a2b-410a-bec5-54c7f4f68b71\",\"type\":\"BoxZoomTool\"},{\"attributes\":{\"data_source\":{\"id\":\"c92c302a-0eb9-4312-a09c-08d3ffc67a2f\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"f9e37ffb-9673-4a64-89ea-811526478335\",\"type\":\"Line\"},\"hover_glyph\":null,\"nonselection_glyph\":{\"id\":\"af14420b-b770-44e1-a2cd-25a8f6930423\",\"type\":\"Line\"},\"selection_glyph\":null},\"id\":\"3c7b7826-8a50-4dd5-b3c5-3e0511df6b5b\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"line_alpha\":{\"value\":0.1},\"line_color\":{\"value\":\"#1f77b4\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"af14420b-b770-44e1-a2cd-25a8f6930423\",\"type\":\"Line\"},{\"attributes\":{\"label\":{\"value\":\"Base\"},\"renderers\":[{\"id\":\"3c7b7826-8a50-4dd5-b3c5-3e0511df6b5b\",\"type\":\"GlyphRenderer\"}]},\"id\":\"ab19cc2d-1cef-45f8-8852-e66da33748ba\",\"type\":\"LegendItem\"},{\"attributes\":{\"line_alpha\":{\"value\":0.1},\"line_color\":{\"value\":\"#1f77b4\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"e69eb6f0-bb8b-4333-9369-f6445b768a1a\",\"type\":\"Line\"},{\"attributes\":{\"callback\":null},\"id\":\"34be6ac0-3df6-4d23-8c52-ed30efdbf356\",\"type\":\"DataRange1d\"},{\"attributes\":{\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"da9ed4b1-7283-48a6-90ca-d1ad2de66298\",\"type\":\"HelpTool\"},{\"attributes\":{\"axis_label\":\"Expanded Income Percentile\",\"axis_label_text_font_size\":{\"value\":\"12pt\"},\"axis_label_text_font_style\":\"normal\",\"formatter\":{\"id\":\"58e173eb-f2e4-433b-8a5c-b794801e77af\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"54896f3d-943e-4e36-a0ff-8f843274afba\",\"type\":\"BasicTicker\"}},\"id\":\"c18a38bf-c76e-4f15-830b-4327b8281670\",\"type\":\"LinearAxis\"},{\"attributes\":{},\"id\":\"54896f3d-943e-4e36-a0ff-8f843274afba\",\"type\":\"BasicTicker\"},{\"attributes\":{\"fill_alpha\":{\"value\":0.1},\"fill_color\":{\"value\":\"#1f77b4\"},\"line_alpha\":{\"value\":0.1},\"line_color\":{\"value\":\"#1f77b4\"},\"visible\":false,\"x\":{\"value\":0},\"y\":{\"value\":0}},\"id\":\"6f4d8b83-b93d-4ac7-a736-e00a362903f8\",\"type\":\"Circle\"},{\"attributes\":{\"line_color\":{\"value\":\"red\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"fe0a4460-6312-4d7e-b2fc-aa6c9305de62\",\"type\":\"Line\"},{\"attributes\":{\"bottom_units\":\"screen\",\"fill_alpha\":{\"value\":0.5},\"fill_color\":{\"value\":\"lightgrey\"},\"left_units\":\"screen\",\"level\":\"overlay\",\"line_alpha\":{\"value\":1.0},\"line_color\":{\"value\":\"black\"},\"line_dash\":[4,4],\"line_width\":{\"value\":2},\"plot\":null,\"render_mode\":\"css\",\"right_units\":\"screen\",\"top_units\":\"screen\"},\"id\":\"7527d213-5ba2-453b-b523-4ddad8d67a8e\",\"type\":\"BoxAnnotation\"},{\"attributes\":{\"line_color\":{\"value\":\"blue\"},\"x\":{\"field\":\"x\"},\"y\":{\"field\":\"y\"}},\"id\":\"f9e37ffb-9673-4a64-89ea-811526478335\",\"type\":\"Line\"},{\"attributes\":{},\"id\":\"4f37fa20-cba4-4a02-a9c4-7d44d13dfd70\",\"type\":\"BasicTickFormatter\"},{\"attributes\":{\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"54896f3d-943e-4e36-a0ff-8f843274afba\",\"type\":\"BasicTicker\"}},\"id\":\"bef5ea04-52b9-4f13-ab0a-c816ab88f5f1\",\"type\":\"Grid\"},{\"attributes\":{\"axis_label\":\"Income+Payroll-Tax Average Tax Rate\",\"axis_label_text_font_size\":{\"value\":\"12pt\"},\"axis_label_text_font_style\":\"normal\",\"formatter\":{\"id\":\"4f37fa20-cba4-4a02-a9c4-7d44d13dfd70\",\"type\":\"BasicTickFormatter\"},\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"d74b6527-ddfa-496f-8cbd-da4e756c1cf2\",\"type\":\"BasicTicker\"}},\"id\":\"5a42e1a4-ec19-48aa-8e5b-bba55b50d35e\",\"type\":\"LinearAxis\"},{\"attributes\":{\"data_source\":{\"id\":\"1ead4f44-0edf-4efe-8669-599f1d7b2ba1\",\"type\":\"ColumnDataSource\"},\"glyph\":{\"id\":\"fe0a4460-6312-4d7e-b2fc-aa6c9305de62\",\"type\":\"Line\"},\"hover_glyph\":null,\"nonselection_glyph\":{\"id\":\"e69eb6f0-bb8b-4333-9369-f6445b768a1a\",\"type\":\"Line\"},\"selection_glyph\":null},\"id\":\"b5633406-b913-496c-a537-ed6e127310c2\",\"type\":\"GlyphRenderer\"},{\"attributes\":{\"dimension\":1,\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"},\"ticker\":{\"id\":\"d74b6527-ddfa-496f-8cbd-da4e756c1cf2\",\"type\":\"BasicTicker\"}},\"id\":\"18683911-57ae-48af-878c-75bc9e403389\",\"type\":\"Grid\"},{\"attributes\":{\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"4595400c-f891-4e04-82e0-766fc736404a\",\"type\":\"PanTool\"},{\"attributes\":{\"plot\":{\"id\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\",\"subtype\":\"Figure\",\"type\":\"Plot\"}},\"id\":\"894faf1b-3da0-4f26-897f-364b711c4105\",\"type\":\"WheelZoomTool\"},{\"attributes\":{\"callback\":null,\"column_names\":[\"y\",\"x\"],\"data\":{\"x\":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99],\"y\":[0.07895179581874519,0.06634721294316294,0.06232208222328071,0.05497015919115694,0.05960176313539847,0.05401399551490164,0.03551996533379567,0.04281907935491022,0.028721107197159586,0.032573760918506285,0.023473829671228307,0.015267341055772396,0.013132797211294097,0.006383210114971765,-0.011193196721595865,-0.03253692078357704,-0.025160720318778394,0.004753642599839727,0.0035200331412459014,0.0014253444482719513,-0.011172258250234688,-0.01160161126179051,-0.014319377304837145,-0.013716767260447791,-0.0009597668588600192,0.0031409119513886247,0.017734643302601907,0.024516769362419148,0.0356916146657997,0.03152329358949895,0.03684216821024068,0.040849391713529457,0.050303933618389814,0.05718601955560751,0.05257573714157146,0.05995670605923375,0.0724438976380649,0.07566070794838416,0.07991741699581602,0.07385222289895975,0.08681162478126597,0.09355046600318391,0.09119957769228904,0.09035124731572103,0.09755577834912937,0.09199313020729794,0.09544415015558622,0.10902507423291115,0.1159574588366485,0.11885405545212785,0.12434587545258156,0.13311167020778977,0.13768630634041273,0.13862208963239406,0.1295046381929107,0.13345532332759558,0.12971607215589084,0.13837033832667076,0.1476045205941908,0.14337639955419812,0.1481770267940186,0.14419528246132063,0.15545885397494472,0.1593070704710866,0.16134633555392897,0.167118510035914,0.16584261966182126,0.17155297460741264,0.17434121256178153,0.18040961580533468,0.17693460279012596,0.18328586137667605,0.1843182064776653,0.18112854115855595,0.18635498015370727,0.18932251510042045,0.19032553466633204,0.1946354664463881,0.20330718578669793,0.20463112429977895,0.2056070445658777,0.20913222503343706,0.21006182658564385,0.2155212485671095,0.22533857215058026,0.22903198128846133,0.23379793299061316,0.23157678220123276,0.23427681769370287,0.23765213766367146,0.24381053990948878,0.24806331403007661,0.25279474806595514,0.26480754346077784,0.2810599482697621,0.3115903749938708]}},\"id\":\"1ead4f44-0edf-4efe-8669-599f1d7b2ba1\",\"type\":\"ColumnDataSource\"}],\"root_ids\":[\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\"]},\"title\":\"Bokeh Application\",\"version\":\"0.12.3\"}};\n",
       "            var render_items = [{\"docid\":\"28a3b5a2-8e42-4a1f-b697-a6bd5560f798\",\"elementid\":\"a1079ce1-71c0-4b22-98f2-b3678fb52828\",\"modelid\":\"69ad1de7-82a9-46ce-a662-c2ca1add0bce\"}];\n",
       "            \n",
       "            Bokeh.embed.embed_items(docs_json, render_items);\n",
       "        });\n",
       "      },\n",
       "      function(Bokeh) {\n",
       "      }\n",
       "    ];\n",
       "  \n",
       "    function run_inline_js() {\n",
       "      \n",
       "      if ((window.Bokeh !== undefined) || (force === \"1\")) {\n",
       "        for (var i = 0; i < inline_js.length; i++) {\n",
       "          inline_js[i](window.Bokeh);\n",
       "        }if (force === \"1\") {\n",
       "          display_loaded();\n",
       "        }} else if (Date.now() < window._bokeh_timeout) {\n",
       "        setTimeout(run_inline_js, 100);\n",
       "      } else if (!window._bokeh_failed_load) {\n",
       "        console.log(\"Bokeh: BokehJS failed to load within specified timeout.\");\n",
       "        window._bokeh_failed_load = true;\n",
       "      } else if (!force) {\n",
       "        var cell = $(\"#a1079ce1-71c0-4b22-98f2-b3678fb52828\").parents('.cell').data().cell;\n",
       "        cell.output_area.append_execute_result(NB_LOAD_WARNING)\n",
       "      }\n",
       "  \n",
       "    }\n",
       "  \n",
       "    if (window._bokeh_is_loading === 0) {\n",
       "      console.log(\"Bokeh: BokehJS loaded, going straight to plotting\");\n",
       "      run_inline_js();\n",
       "    } else {\n",
       "      load_libs(js_urls, function() {\n",
       "        console.log(\"Bokeh: BokehJS plotting callback run at\", now());\n",
       "        run_inline_js();\n",
       "      });\n",
       "    }\n",
       "  }(this));\n",
       "</script>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "fig2 = utils.xtr_graph_plot(atr_data)\n",
    "show(fig2)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "anaconda-cloud": {},
  "kernelspec": {
   "display_name": "Python [Root]",
   "language": "python",
   "name": "Python [Root]"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 2
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython2",
   "version": "2.7.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 0
}
